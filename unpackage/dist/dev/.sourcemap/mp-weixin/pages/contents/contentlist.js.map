{"version":3,"sources":["uni-app:///main.js","webpack:///E:/APPpro/voss/规则之树/pages/contents/contentlist.vue?5919","webpack:///E:/APPpro/voss/规则之树/pages/contents/contentlist.vue?2d9b","webpack:///E:/APPpro/voss/规则之树/pages/contents/contentlist.vue?ca98","webpack:///E:/APPpro/voss/规则之树/pages/contents/contentlist.vue?1331","uni-app:///pages/contents/contentlist.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","StatusBar","CustomBar","NavBar","AppStyle","title","type","id","contentsList","page","moreText","isLoad","metaList","mid","name","parent","topList","order","orderCur","TabCur","scrollLeft","isLoading","onPullDownRefresh","onReachBottom","that","onShow","onLoad","methods","allCache","tabSelect","topSelect","back","uni","delta","loadMore","getMetaList","url","header","method","dataType","success","clearTimeout","fail","icon","getContentsList","info","token","list","getMetaContents","localStorage","toSearch"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,oBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAwH;AACxH;AAC+D;AACL;;;AAG1D;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAunB,CAAgB,qnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;ACmD3oB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MAEAC;MAEAC,WACA;QACAC;QACAC;QACAC;MACA,EACA;MACAC,UACA;QACAC;QACAH;QACAC;MACA,GACA;QACAE;QACAH;QACAC;MACA,GACA;QACAE;QACAH;QACAC;MACA,EACA;MACAG;MACAC;MACAC;MACAC;IAEA;EACA;EACAC;IACA;EAEA;EACAC;IACA;IACA;IACA;MACAC;IACA;EAEA;EACAC;IACA;EAMA;EACAC;IACA;IAEAF;IAEAA;IACAA;IACA;IACAA;IACA;MACA;QAEAA;MACA;QACAA;MACA;QACAA;MACA;IACA;IACA;MAEAA;IACA;EAEA;EACAG;IACAC;MACA;MACA;IAEA;IACAC;MACA;MACAL;MACAA;MACAA;MACAA;MACA;QACAA;MACA;QACAA;MACA;IACA;IACAM;MACA;MACAN;MACAA;MACAA;IACA;IACAO;MACAC;QACAC;MACA;IACA;IACAC;MACA;MACAV;MACAA;MACA;QAEAA;MACA;QACA;UACAA;QACA;UACAA;QACA;MACA;QACAA;MAEA;QACAA;MACA;IACA;IACAW;MACA;MACA;QACA;MACA;MACAX;QACAY;QACApC;UACA;UACA;UACA;QACA;QACAqC;UACA;QACA;QACAC;QACAC;QACAC;UACA;YACA;YACA;cAEAhB;YAEA;UACA;UACA;YACAA;YACAiB;UACA;QACA;QACAC;UACAV;YACA3B;YACAsC;UACA;UACA;YACAnB;YACAiB;UACA;QACA;MACA;IACA;IACAG;MACA;MACA;QACA;MACA;MACA;MACA;QACAC;UACA;UACA;QACA;MACA;MACA;QACA5B;MACA;MACA;MACA;QACAR;MACA;QACAe;MACA;MACA;MACA;QACA;QACAsB;MACA;MACA;QACA;QACA;QACA;QACA;QACA;MACA;MACAtB;QACAY;QACApC;QACAqC;UACA;QACA;QACAC;QACAC;QACAC;UACA;UACAhB;UACAA;UACA;YACA;YACA;cACA;cACA;cACA;cAYA;cACA;cACA;cACA;gBACA;gBACA;kBACA;oBACA;sBACAuB;oBACA;kBACA;gBACA;gBACAvC;cAUA;cACA;gBACAgB;gBACAA;cACA;gBACAA;cACA;YAIA;cACAA;YACA;UACA;UACA;YACAA;YACAiB;UACA;QACA;QACAC;UACAlB;UACAA;UACAQ;YACA3B;YACAsC;UACA;UACA;YACAnB;YACAiB;UACA;QACA;MACA;IACA;IACAO;MACA;MACA;QACA;MACA;MACA;MACA;QACA;QACAF;MACA;MACA;MACA;QACArC;MACA;MACAe;QACAY;QACApC;UACA;UACA;UACA;UACA;UACA;QACA;QACAqC;UACA;QACA;QACAC;QACAC;QACAC;UACA;UACAhB;UACAA;UACA;YACA;YACA;cACA;cACA;cACA;cACA;gBACA;gBACA;kBACA;oBACA;sBACAuB;oBACA;kBACA;gBACA;gBACAvC;cACA;cACA;gBACAgB;gBACAA;cACA;gBACAA;cACA;cAGAyB;YACA;cACAzB;YACA;UACA;UACA;YACAA;YACAiB;UACA;QACA;QACAC;UACAV;YACA3B;YACAsC;UACA;UACA;YACAnB;YACAiB;UACA;UACAjB;UACAA;QACA;MACA;IACA;IACA0B;MACA;MAEAlB;QACAI;MACA;IACA;EACA;AACA;AAAA,2B","file":"pages/contents/contentlist.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/uni-stat/dist/uni-stat.es.js';\nimport Vue from 'vue'\nimport Page from './pages/contents/contentlist.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./contentlist.vue?vue&type=template&id=4e50b7ca&\"\nvar renderjs\nimport script from \"./contentlist.vue?vue&type=script&lang=js&\"\nexport * from \"./contentlist.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/contents/contentlist.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contentlist.vue?vue&type=template&id=4e50b7ca&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.contentsList.length\n  var g1 = _vm.contentsList.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contentlist.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contentlist.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"user\" :class=\"AppStyle\">\n\t\t<view class=\"header\" :style=\"[{height:CustomBar + 'px'}]\">\n\t\t\t<view class=\"cu-bar bg-white\" :style=\"{'height': CustomBar + 'px','padding-top':StatusBar + 'px'}\">\n\t\t\t\t<view class=\"action\" @tap=\"back\">\n\t\t\t\t\t<text class=\"cuIcon-back\"></text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"content text-bold\" :style=\"[{top:StatusBar + 'px'}]\">\n\t\t\t\t\t{{title}}\n\t\t\t\t</view>\n\t\t\t\t<!--  #ifdef H5 || APP-PLUS -->\n\t\t\t\t<view class=\"action\" @tap=\"toSearch\">\n\t\t\t\t\t<text class=\"cuIcon-search\"></text>\n\t\t\t\t</view>\n\t\t\t\t<!--  #endif -->\n\t\t\t</view>\n\t\t</view>\n\t\t<view :style=\"[{padding:NavBar + 'px 10px 0px 10px'}]\"></view>\n\t\t<scroll-view scroll-x class=\"bg-white nav metaList\" scroll-with-animation :scroll-left=\"scrollLeft\" style=\"margin-top: 20upx;\" v-if=\"type=='all'\">\n\t\t\t<view class=\"cu-item\" :class=\"item.mid==TabCur?'text-blue cur':''\" v-for=\"(item,index) in metaList\" :key=\"index\" @tap=\"tabSelect\" :data-id=\"item.mid\" v-if=\"item.parent==0\">\n\t\t\t\t{{item.name}}\n\t\t\t</view>\n\t\t</scroll-view>\n\t\t\n\t\t<view class=\"cu-card article no-card\">\n\t\t<scroll-view scroll-x class=\"bg-white nav metaList\" scroll-with-animation :scroll-left=\"scrollLeft\" style=\"margin-top: 20upx;\" v-if=\"type=='top'\">\n\t\t\t<view class=\"cu-item\" :class=\"item.order==orderCur?'text-blue cur':''\" v-for=\"(item,index) in topList\" :key=\"index\" @tap=\"topSelect\" :data-order=\"item.order\">\n\t\t\t\t{{item.name}}\n\t\t\t</view>\n\t\t</scroll-view>\n\t\t<block v-for=\"(item,index) in contentsList\" :key=\"index\">\n\t\t\t<articleItem :item=\"item\"></articleItem>\n\t\t</block>\n\t\t<view class=\"load-more\" @tap=\"loadMore\" v-if=\"contentsList.length>0\">\n\t\t\t<text>{{moreText}}</text>\n\t\t</view>\n\t\t<view class=\"no-data\" v-if=\"contentsList.length==0\">\n\t\t\t<text class=\"cuIcon-text\"></text>暂时没有数据\n\t\t</view>\n\t\t</view>\n\t\t<!--加载遮罩-->\n\t\t<view class=\"loading\" v-if=\"isLoading==0\">\n\t\t\t<view class=\"loading-main\">\n\t\t\t\t<image src=\"../../static/loading.gif\"></image>\n\t\t\t</view>\n\t\t</view>\n\t\t<!--加载遮罩结束-->\n\t</view>\n</template>\n\n<script>\n\timport { localStorage } from '../../js_sdk/mp-storage/mp-storage/index.js'\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tStatusBar: this.StatusBar,\n\t\t\t\tCustomBar: this.CustomBar,\n\t\t\t\tNavBar:this.StatusBar +  this.CustomBar,\n\t\t\tAppStyle:this.$store.state.AppStyle,\n\t\t\t\t\n\t\t\t\ttitle:\"\",\n\t\t\t\ttype:\"\",\n\t\t\t\tid:0,\n\t\t\t\t\n\t\t\t\tcontentsList:[],\n\t\t\t\tpage:1,\n\t\t\t\tmoreText:\"加载更多\",\n\t\t\t\t\n\t\t\t\tisLoad:0,\n\t\t\t\t\n\t\t\t\tmetaList:[\n\t\t\t\t\t{\n\t\t\t\t\t\tmid:0,\n\t\t\t\t\t\tname:\"全部\",\n\t\t\t\t\t\tparent:0\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\ttopList:[\n\t\t\t\t\t{\n\t\t\t\t\t\torder:\"commentsNum\",\n\t\t\t\t\t\tname:\"评论榜\",\n\t\t\t\t\t\tparent:0\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\torder:\"views\",\n\t\t\t\t\t\tname:\"点击榜\",\n\t\t\t\t\t\tparent:0\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\torder:\"likes\",\n\t\t\t\t\t\tname:\"喜欢榜\",\n\t\t\t\t\t\tparent:0\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\torderCur:\"commentsNum\",\n\t\t\t\tTabCur: 0,\n\t\t\t\tscrollLeft: 0,\n\t\t\t\tisLoading:0,\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tonPullDownRefresh(){\n\t\t\tvar that = this;\n\t\t\t\n\t\t},\n\t\tonReachBottom() {\n\t\t    //触底后执行的方法，比如无限加载之类的\n\t\t\tvar that = this;\n\t\t\tif(that.isLoad==0){\n\t\t\t\tthat.loadMore();\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tonShow(){\n\t\t\tvar that = this;\n\t\t\t// #ifdef APP-PLUS\n\t\t\t\n\t\t\tplus.navigator.setStatusBarStyle(\"dark\")\n\t\t\t// #endif\n\t\t\t\n\t\t},\n\t\tonLoad(res) {\n\t\t\tvar that = this;\n\t\t\t// #ifdef APP-PLUS || MP\n\t\t\tthat.NavBar = this.CustomBar;\n\t\t\t// #endif\n\t\t\tthat.title = res.title;\n\t\t\tthat.type =  res.type;\n\t\t\t//user根据用户查询 meta根据分类和标签查询，all显示分类查询全部，search根据搜索关键词查询\n\t\t\tthat.id =  res.id;\n\t\t\tif(res.type!=\"\"){\n\t\t\t\tif(that.type==\"meta\"){\n\t\t\t\t\t\n\t\t\t\t\tthat.getMetaContents(false,that.id);\n\t\t\t\t}else if(that.type==\"top\"){\n\t\t\t\t\tthat.getContentsList(false,that.type,that.id);\n\t\t\t\t}else{\n\t\t\t\t\tthat.getContentsList(false,that.type,that.id);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(res.type==\"all\"){\n\t\t\t\t\n\t\t\t\tthat.getMetaList();\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tmethods:{\n\t\t\tallCache(){\n\t\t\t\tvar that = this;\n\t\t\t\tvar meta = that.TabCur;\n\t\t\t\t\n\t\t\t},\n\t\t\ttabSelect(e) {\n\t\t\t\tvar that = this;\n\t\t\t\tthat.TabCur = e.currentTarget.dataset.id;\n\t\t\t\tthat.id = e.currentTarget.dataset.id;\n\t\t\t\tthat.page = 1;\n\t\t\t\tthat.scrollLeft = (e.currentTarget.dataset.id - 1) * 60;\n\t\t\t\tif(that.TabCur==0){\n\t\t\t\t\tthat.getContentsList(false,\"all\",0);\n\t\t\t\t}else{\n\t\t\t\t\tthat.getMetaContents(false,that.TabCur);\n\t\t\t\t}\n\t\t\t},\n\t\t\ttopSelect(e){\n\t\t\t\tvar that = this;\n\t\t\t\tthat.orderCur = e.currentTarget.dataset.order;\n\t\t\t\tthat.page = 1;\n\t\t\t\tthat.getContentsList(false,\"all\",0);\n\t\t\t},\n\t\t\tback(){\n\t\t\t\tuni.navigateBack({\n\t\t\t\t\tdelta: 1\n\t\t\t\t});\n\t\t\t},\n\t\t\tloadMore(){\n\t\t\t\tvar that = this;\n\t\t\t\tthat.moreText=\"正在加载中...\";\n\t\t\t\tthat.isLoad=1;\n\t\t\t\tif(that.type==\"meta\"){\n\t\t\t\t\t\n\t\t\t\t\tthat.getMetaContents(true,that.id);\n\t\t\t\t}else if(that.type==\"all\"){\n\t\t\t\t\tif(that.id==0){\n\t\t\t\t\t\tthat.getContentsList(true,that.type,that.id);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthat.getMetaContents(true,that.id);\n\t\t\t\t\t}\n\t\t\t\t}else if(that.type==\"top\"){\n\t\t\t\t\tthat.getContentsList(true,that.type,that.id);\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tthat.getContentsList(true,that.type,that.id);\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetMetaList(){\n\t\t\t\tvar that = this;\n\t\t\t\tvar data = {\n\t\t\t\t\t\"type\":\"category\"\n\t\t\t\t}\n\t\t\t\tthat.$Net.request({\n\t\t\t\t\turl: that.$API.getMetasList(),\n\t\t\t\t\tdata:{\n\t\t\t\t\t\t\"searchParams\":JSON.stringify(that.$API.removeObjectEmptyKey(data)),\n\t\t\t\t\t\t\"limit\":15,\n\t\t\t\t\t\t\"page\":1,\n\t\t\t\t\t},\n\t\t\t\t\theader:{\n\t\t\t\t\t\t'Content-Type':'application/x-www-form-urlencoded'\n\t\t\t\t\t},\n\t\t\t\t\tmethod: \"post\",\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tif(res.data.code==1){\n\t\t\t\t\t\t\tvar list = res.data.data;\n\t\t\t\t\t\t\tif(list.length>0){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tthat.metaList = that.metaList.concat(list);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar timer = setTimeout(function() {\n\t\t\t\t\t\t\tthat.isLoading=1;\n\t\t\t\t\t\t\tclearTimeout('timer')\n\t\t\t\t\t\t}, 300)\n\t\t\t\t\t},\n\t\t\t\t\tfail: function(res) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"网络开小差了哦\",\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tvar timer = setTimeout(function() {\n\t\t\t\t\t\t\tthat.isLoading=1;\n\t\t\t\t\t\t\tclearTimeout('timer')\n\t\t\t\t\t\t}, 300)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tgetContentsList(isPage,type,id){\n\t\t\t\tvar that = this;\n\t\t\t\tvar info = {\n\t\t\t\t\t\"type\":\"post\"\n\t\t\t\t}\n\t\t\t\tvar order = \"created\";\n\t\t\t\tif(type==\"user\"){\n\t\t\t\t\tinfo = {\n\t\t\t\t\t\t\"type\":\"post\",\n\t\t\t\t\t\t\"authorId\":that.id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(that.type==\"top\"){\n\t\t\t\t\torder = that.orderCur\n\t\t\t\t}\n\t\t\t\tvar page = that.page;\n\t\t\t\tif(isPage){\n\t\t\t\t\tpage++;\n\t\t\t\t}else{\n\t\t\t\t\tthat.contentsList = [];\n\t\t\t\t}\r\n\t\t\t\tvar token = \"\";\r\n\t\t\t\tif(localStorage.getItem('userinfo')){\r\n\t\t\t\t\tvar userInfo = JSON.parse(localStorage.getItem('userinfo'));\r\n\t\t\t\t\ttoken=userInfo.token;\r\n\t\t\t\t}\n\t\t\t\tvar data = {\n\t\t\t\t\t\"searchParams\":JSON.stringify(that.$API.removeObjectEmptyKey(info)),\n\t\t\t\t\t\"limit\":5,\n\t\t\t\t\t\"page\":page,\n\t\t\t\t\t\"order\":order,\r\n\t\t\t\t\t\"token\":token\n\t\t\t\t};\n\t\t\t\tthat.$Net.request({\n\t\t\t\t\turl: that.$API.getContentsList(),\n\t\t\t\t\tdata:data,\n\t\t\t\t\theader:{\n\t\t\t\t\t\t'Content-Type':'application/x-www-form-urlencoded'\n\t\t\t\t\t},\n\t\t\t\t\tmethod: \"post\",\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t//console.log(JSON.stringify(res))\n\t\t\t\t\t\tthat.moreText=\"加载更多\";\n\t\t\t\t\t\tthat.isLoad=0;\n\t\t\t\t\t\tif(res.data.code==1){\n\t\t\t\t\t\t\tvar list = res.data.data;\n\t\t\t\t\t\t\tif(list.length>0){\n\t\t\t\t\t\t\t\tvar num = res.data.data.length;\n\t\t\t\t\t\t\t\tvar rand = Math.floor(Math.random()*num);\n\t\t\t\t\t\t\t\tvar pushAdsInfo = null;\n\t\t\t\t\t\t\t\t// #ifdef APP-PLUS || H5\n\t\t\t\t\t\t\t\tif(localStorage.getItem('pushAds')){\n\t\t\t\t\t\t\t\t\tvar pushAds = JSON.parse(localStorage.getItem('pushAds'));\n\t\t\t\t\t\t\t\t\tvar adsNum = pushAds.length;\n\t\t\t\t\t\t\t\t\tif(adsNum>0){\n\t\t\t\t\t\t\t\t\t\tvar adsRand = Math.floor(Math.random()*adsNum);\n\t\t\t\t\t\t\t\t\t\tpushAdsInfo = pushAds[adsRand];\n\t\t\t\t\t\t\t\t\t\tpushAdsInfo.isAds = 1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// #endif\n\t\t\t\t\t\t\t\tvar contentsList = [];\n\t\t\t\t\t\t\t\t//将自定义字段获取并添加到数据\n\t\t\t\t\t\t\t\tvar curFields = that.$API.GetFields();\n\t\t\t\t\t\t\t\tfor(var i in list){\n\t\t\t\t\t\t\t\t\tvar fields = list[i].fields;\n\t\t\t\t\t\t\t\t\tif(fields.length>0){\n\t\t\t\t\t\t\t\t\t\tfor(var j in fields){\n\t\t\t\t\t\t\t\t\t\t\tif(curFields.indexOf(fields[j].name)!=-1){\n\t\t\t\t\t\t\t\t\t\t\t\tlist[i][fields[j].name]=fields[j].strValue;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcontentsList.push(list[i]);\n\t\t\t\t\t\t\t\t\t// #ifdef APP-PLUS || H5\n\t\t\t\t\t\t\t\t\tvar isAds = Math.round(Math.random());\n\t\t\t\t\t\t\t\t\tif(isAds==1){\n\t\t\t\t\t\t\t\t\t\tif(i==rand&&pushAdsInfo!=null){\n\t\t\t\t\t\t\t\t\t\t\tcontentsList.push(pushAdsInfo);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// #endif\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(isPage){\n\t\t\t\t\t\t\t\t\tthat.page++;\n\t\t\t\t\t\t\t\t\tthat.contentsList = that.contentsList.concat(contentsList);\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tthat.contentsList = contentsList;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthat.moreText=\"没有更多文章了\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar timer = setTimeout(function() {\n\t\t\t\t\t\t\tthat.isLoading=1;\n\t\t\t\t\t\t\tclearTimeout('timer')\n\t\t\t\t\t\t}, 300)\n\t\t\t\t\t},\n\t\t\t\t\tfail: function(res) {\n\t\t\t\t\t\tthat.moreText=\"加载更多\";\n\t\t\t\t\t\tthat.isLoad=0;\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"网络开小差了哦\",\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tvar timer = setTimeout(function() {\n\t\t\t\t\t\t\tthat.isLoading=1;\n\t\t\t\t\t\t\tclearTimeout('timer')\n\t\t\t\t\t\t}, 300)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tgetMetaContents(isPage,meta){\n\t\t\t\tvar that = this;\n\t\t\t\tvar data = {\n\t\t\t\t\t\"mid\":meta\n\t\t\t\t}\r\n\t\t\t\tvar token = \"\";\r\n\t\t\t\tif(localStorage.getItem('userinfo')){\r\n\t\t\t\t\tvar userInfo = JSON.parse(localStorage.getItem('userinfo'));\r\n\t\t\t\t\ttoken=userInfo.token;\r\n\t\t\t\t}\n\t\t\t\tvar page = that.page;\n\t\t\t\tif(isPage){\n\t\t\t\t\tpage++;\n\t\t\t\t}\n\t\t\t\tthat.$Net.request({\n\t\t\t\t\turl: that.$API.getMetaContents(),\n\t\t\t\t\tdata:{\n\t\t\t\t\t\t\"searchParams\":JSON.stringify(that.$API.removeObjectEmptyKey(data)),\n\t\t\t\t\t\t\"limit\":5,\n\t\t\t\t\t\t\"page\":page,\n\t\t\t\t\t\t\"order\":\"created\",\r\n\t\t\t\t\t\t\"token\":token\n\t\t\t\t\t},\n\t\t\t\t\theader:{\n\t\t\t\t\t\t'Content-Type':'application/x-www-form-urlencoded'\n\t\t\t\t\t},\n\t\t\t\t\tmethod: \"post\",\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t//console.log(JSON.stringify(res))\n\t\t\t\t\t\tthat.isLoad=0;\n\t\t\t\t\t\tthat.moreText=\"加载更多\";\n\t\t\t\t\t\tif(res.data.code==1){\n\t\t\t\t\t\t\tvar list = res.data.data;\n\t\t\t\t\t\t\tif(list.length>0){\n\t\t\t\t\t\t\t\tvar contentsList = [];\n\t\t\t\t\t\t\t\t//将自定义字段获取并添加到数据\n\t\t\t\t\t\t\t\tvar curFields = that.$API.GetFields();\n\t\t\t\t\t\t\t\tfor(var i in list){\n\t\t\t\t\t\t\t\t\tvar fields = list[i].fields;\n\t\t\t\t\t\t\t\t\tif(fields.length>0){\n\t\t\t\t\t\t\t\t\t\tfor(var j in fields){\n\t\t\t\t\t\t\t\t\t\t\tif(curFields.indexOf(fields[j].name)!=-1){\n\t\t\t\t\t\t\t\t\t\t\t\tlist[i][fields[j].name]=fields[j].strValue;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcontentsList.push(list[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(isPage){\n\t\t\t\t\t\t\t\t\tthat.page++;\n\t\t\t\t\t\t\t\t\tthat.contentsList = that.contentsList.concat(contentsList);\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tthat.contentsList = contentsList;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tlocalStorage.setItem('contentsList_'+meta,JSON.stringify(that.contentsList));\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthat.moreText=\"没有更多文章了\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar timer = setTimeout(function() {\n\t\t\t\t\t\t\tthat.isLoading=1;\n\t\t\t\t\t\t\tclearTimeout('timer')\n\t\t\t\t\t\t}, 300)\n\t\t\t\t\t},\n\t\t\t\t\tfail: function(res) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"网络开小差了哦\",\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tvar timer = setTimeout(function() {\n\t\t\t\t\t\t\tthat.isLoading=1;\n\t\t\t\t\t\t\tclearTimeout('timer')\n\t\t\t\t\t\t}, 300)\n\t\t\t\t\t\tthat.moreText=\"加载更多\";\n\t\t\t\t\t\tthat.isLoad=0;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\ttoSearch(){\n\t\t\t\tvar that = this;\n\t\t\t\t\n\t\t\t\tuni.navigateTo({\n\t\t\t\t    url: '/pages/contents/search'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n</style>\n"],"sourceRoot":""}
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-myshop"],{"3f2d":function(t,e,i){"use strict";i.r(e);var o=i("4ec6"),n=i.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);e["default"]=n.a},"4ec6":function(t,e,i){"use strict";i("7a82");var o=i("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("e9c4"),i("99af");var n=o(i("74ee")),a=i("625a"),s={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,userInfo:null,uid:0,token:"",shopList:[],isLoad:0,page:1,moreText:"加载更多",type:1,isLoading:0}},onPullDownRefresh:function(){this.page=1,this.getShopList();setTimeout((function(){uni.stopPullDownRefresh()}),1e3)},onReachBottom:function(){0==this.isLoad&&this.loadMore()},onShow:function(){a.localStorage.removeItem("userShopinfo"),a.localStorage.getItem("userinfo")&&(this.userInfo=JSON.parse(a.localStorage.getItem("userinfo")),this.uid=this.userInfo.uid),a.localStorage.getItem("token")&&(this.token=a.localStorage.getItem("token")),this.isLoad=0,this.page=1,this.getShopList()},onLoad:function(){},methods:{back:function(){uni.navigateBack({delta:1})},loadMore:function(){this.moreText="正在加载中...",this.isLoad=1,this.getShopList(!0)},getShopList:function(t){var e=this,i=0;if(!a.localStorage.getItem("userinfo")){uni.showToast({title:"请先登录",icon:"none",duration:1e3,position:"bottom"});setTimeout((function(){uni.navigateTo({url:"/pages/user/login"}),clearTimeout("timer")}),1e3);return!1}var o=JSON.parse(a.localStorage.getItem("userinfo"));i=o.uid;var n={uid:i},s=e.page;t&&s++,e.$Net.request({url:e.$API.shopList(),data:{searchParams:JSON.stringify(e.$API.removeObjectEmptyKey(n)),limit:6,page:s},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(i){setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300);if(e.isLoad=0,e.moreText="加载更多",1==i.data.code){var o=i.data.data;0==o.length&&(e.moreText="没有更多数据了"),t?o.length>0&&(e.page++,e.shopList=e.shopList.concat(o)):e.shopList=o}},fail:function(t){e.moreText="加载更多",e.isLoad=0,uni.showToast({title:"网络开小差了哦",icon:"none"});setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)}})},deleteShop:function(t){var e=this,i="";if(!a.localStorage.getItem("userinfo")){uni.showToast({title:"请先登录",icon:"none",duration:1e3,position:"bottom"});setTimeout((function(){uni.navigateTo({url:"/pages/user/login"}),clearTimeout("timer")}),1e3);return!1}var o=JSON.parse(a.localStorage.getItem("userinfo"));i=o.token;var n={key:t,token:i};uni.showModal({title:"确定要删除此商品吗?",content:" ",success:function(t){t.confirm&&(uni.showLoading({title:"加载中"}),e.$Net.request({url:e.$API.deleteShop(),data:n,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:t.data.msg,icon:"none"}),1==t.data.code&&(e.page=1,e.getShopList())},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"}),uni.stopPullDownRefresh()}}))}})},toShop:function(t){uni.navigateTo({url:"/pages/edit/addshop"})},sellOrder:function(){uni.navigateTo({url:"/pages/user/sellorder"})},editShop:function(t){var e=t.id,i=t.isMd;1==i?uni.navigateTo({url:"/pages/user/addshop?type=edit&sid="+e}):uni.navigateTo({url:"/pages/edit/addshop?type=edit&id="+e})}},components:{waves:n.default}};e.default=s},7037:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"user",class:t.$store.state.AppStyle},[o("v-uni-view",{staticClass:"header",style:[{height:t.CustomBar+"px"}]},[o("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[o("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[o("v-uni-text",{staticClass:"cuIcon-back"})],1),o("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t._v("我的商品")]),o("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toShop.apply(void 0,arguments)}}},[o("v-uni-text",{staticClass:"cuIcon-add"})],1)],1)],1),o("v-uni-view",{style:[{padding:t.NavBar+"px 10px 0px 10px"}]}),o("v-uni-view",{staticClass:"data-box"},[o("v-uni-view",{staticClass:"all-btn"},[o("v-uni-view",{staticClass:"user-btn flex flex-direction"},[o("v-uni-button",{staticClass:"cu-btn bg-yellow margin-tb-sm lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sellOrder.apply(void 0,arguments)}}},[t._v("已售出订单")])],1)],1),0==t.shopList.length?o("v-uni-view",{staticClass:"no-data"},[o("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有数据")],1):t._e(),o("v-uni-view",{staticClass:"shop-list"},[t._l(t.shopList,(function(t,e){return[o("shopItem",{key:e+"_0",attrs:{item:t,isAdmin:!0}})]}))],2)],1),t.shopList.length>0?o("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[o("v-uni-text",[t._v(t._s(t.moreText))])],1):t._e(),0==t.isLoading?o("v-uni-view",{staticClass:"loading"},[o("v-uni-view",{staticClass:"loading-main"},[o("v-uni-image",{attrs:{src:i("14d6")}})],1)],1):t._e()],1)},n=[]},e26c:function(t,e,i){"use strict";i.r(e);var o=i("7037"),n=i("3f2d");for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);var s=i("f0c5"),u=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,"701e420e",null,!1,o["a"],void 0);e["default"]=u.exports}}]);
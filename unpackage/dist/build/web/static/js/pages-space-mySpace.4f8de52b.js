(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-space-mySpace"],{"2c70":function(t,e,i){"use strict";i.r(e);var s=i("b08a"),a=i("a54a");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);var o=i("f0c5"),c=Object(o["a"])(a["default"],s["b"],s["c"],!1,null,"01642361",null,!1,s["a"],void 0);e["default"]=c.exports},a54a:function(t,e,i){"use strict";i.r(e);var s=i("be3e"),a=i.n(s);for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);e["default"]=a.a},b08a:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"userpost",class:t.AppStyle},[i("v-uni-view",{staticClass:"header",style:[{height:t.CustomBar+"px"}]},[i("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-back"})],1),i("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t._v("我的动态")])],1)],1),i("v-uni-view",{style:[{padding:t.NavBar+"px 10px 0px 10px"}]}),i("v-uni-view",{staticClass:"data-box"},[i("v-uni-view",{staticClass:"cu-bar bg-white search"},[i("v-uni-view",{staticClass:"search-form round"},[i("v-uni-text",{staticClass:"cuIcon-search"}),i("v-uni-input",{attrs:{type:"text",placeholder:"输入搜索关键字"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.searchTag.apply(void 0,arguments)}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),""!=t.searchText?i("v-uni-view",{staticClass:"search-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.searchClose()}}},[i("v-uni-text",{staticClass:"cuIcon-close"})],1):t._e()],1)],1),i("v-uni-view",{staticClass:"search-type grid col-3"},[i("v-uni-view",{staticClass:"search-type-box",class:0==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toType(0)}}},[i("v-uni-text",[t._v("待审核")])],1),i("v-uni-view",{staticClass:"search-type-box",class:1==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toType(1)}}},[i("v-uni-text",[t._v("已发布")])],1),i("v-uni-view",{staticClass:"search-type-box",class:2==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toType(2)}}},[i("v-uni-text",[t._v("已锁定")])],1)],1)],1),i("v-uni-view",{staticClass:"cu-card dynamic no-card square-list"},[0==t.spaceList.length?i("v-uni-view",{staticClass:"no-data"},[i("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有数据")],1):t._e(),t._l(t.spaceList,(function(e,s){return t.spaceList.length>0?[i("v-uni-view",{key:s+"_0",staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-list menu-avatar"},[i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-avatar round lg",style:"background-image:url("+e.userJson.avatar+");",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toUserContents(e.userJson)}}}),i("v-uni-view",{staticClass:"content flex-sub"},[i("v-uni-view",[t._v(t._s(e.userJson.name))]),i("v-uni-view",{staticClass:"text-gray text-sm flex"},[t._v(t._s(t.formatDate(e.created)))])],1)],1)],1),i("v-uni-view",{staticClass:"text-content break-all",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toInfo(e.id)}}},[3==e.type?i("v-uni-text",{staticClass:"text-blue"},[t._v("[动态评论]")]):t._e(),i("v-uni-rich-text",{attrs:{nodes:t.markHtml(e.text)}})],1),0==e.type?[e.picList.length>0?i("v-uni-view",{staticClass:"grid flex-sub padding-lr col-3 grid-square"},t._l(e.picList,(function(s,a){return i("v-uni-view",{key:a,staticClass:"bg-img",style:"background-image:url("+s+");",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewImage(e.picList,s)}}})})),1):t._e()]:t._e(),1==e.type?[i("v-uni-view",{staticClass:"grid flex-sub padding-lr"},[0==e.contentJson.cid?[i("v-uni-view",{staticClass:"user-post-info"},[i("v-uni-view",{staticClass:"user-post-text"},[i("v-uni-view",{staticClass:"user-post-title"},[t._v("文章不存在")]),i("v-uni-view",{staticClass:"user-post-intro"},[t._v("该文章已被删除或数据缺失！")])],1)],1)]:[i("v-uni-view",{staticClass:"user-post-info",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goContentInfo(e.contentJson)}}},[e.contentJson.images.length>0?i("v-uni-view",{staticClass:"user-post-pic"},[i("v-uni-image",{attrs:{src:e.contentJson.images[0],mode:"widthFix"}})],1):t._e(),i("v-uni-view",{staticClass:"user-post-text"},[i("v-uni-view",{staticClass:"user-post-title"},[t._v(t._s(t.replaceSpecialChar(e.contentJson.title)))]),i("v-uni-view",{staticClass:"user-post-intro"},[t._v(t._s(e.contentJson.text))])],1)],1)]],2)]:t._e(),2==e.type?[i("v-uni-view",{staticClass:"grid flex-sub padding-lr"},[0==e.forwardJson.id?[i("v-uni-view",{staticClass:"user-space-info"},[i("v-uni-view",{staticClass:"user-space-text"},[t._v("该动态已被删除或数据缺失！")])],1)]:[i("v-uni-view",{staticClass:"user-space-info",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toInfo(e.forwardJson.id)}}},[i("v-uni-view",{staticClass:"user-space-text"},[i("v-uni-text",{staticClass:"text-blue"},[t._v("@"+t._s(e.forwardJson.username)+"：")]),i("v-uni-rich-text",{attrs:{nodes:t.markHtml(e.forwardJson.text)}})],1),e.forwardJson.picList.length>0?i("v-uni-view",{staticClass:"grid flex-sub col-3 grid-square margin-top-xs"},t._l(e.forwardJson.picList,(function(t,e){return i("v-uni-view",{key:e,staticClass:"bg-img",style:"background-image:url("+t+");"})})),1):t._e()],1)]],2)]:t._e(),4==e.type?[i("v-uni-view",{staticClass:"padding-lr spaceVideo"},[i("v-uni-video",{attrs:{src:e.pic}})],1)]:t._e(),5==e.type?[i("v-uni-view",{staticClass:"grid flex-sub padding-lr"},[0==e.shopJson.id?[i("v-uni-view",{staticClass:"user-post-info"},[i("v-uni-view",{staticClass:"user-post-text"},[i("v-uni-view",{staticClass:"user-post-title"},[t._v("该商品不存在或已被删除！")]),i("v-uni-view",{staticClass:"user-post-intro"},[i("v-uni-text",{staticClass:"text-red text-lg text-bold"},[t._v("-- "+t._s(t.currencyName))])],1),i("v-uni-view",{staticClass:"user-post-intro"},[i("v-uni-text",{staticClass:"text-gray text-sm"},[t._v("剩余数量：0")])],1)],1)],1)]:[i("v-uni-view",{staticClass:"user-post-info",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goShopInfo(e.shopJson.id)}}},[i("v-uni-view",{staticClass:"user-post-pic"},[i("v-uni-image",{attrs:{src:e.shopJson.imgurl,mode:"widthFix"}})],1),i("v-uni-view",{staticClass:"user-post-text"},[i("v-uni-view",{staticClass:"user-post-title"},[t._v(t._s(t.replaceSpecialChar(e.shopJson.title)))]),i("v-uni-view",{staticClass:"user-post-intro"},[i("v-uni-text",{staticClass:"text-red text-lg text-bold"},[t._v(t._s(parseInt(e.shopJson.price))+" "+t._s(t.currencyName))])],1),i("v-uni-view",{staticClass:"user-post-intro"},[i("v-uni-text",{staticClass:"text-gray text-sm"},[t._v("剩余数量："+t._s(e.shopJson.num))])],1)],1)],1)]],2)]:t._e(),i("v-uni-view",{staticClass:"forum-list-operate padding-sm text-center bg-white"},[i("v-uni-text",{staticClass:"text-red",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toDelete(e.id)}}},[t._v("删除")])],1)],2)]:t._e()}))],2),t.isPlay?i("v-uni-view",{staticClass:"videoPlay"},[i("v-uni-view",{staticClass:"videoPlay-bg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isPlay=!1}}},[i("v-uni-view",{staticClass:"videoPlay-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isPlay=!1}}},[i("i",{staticClass:"cuIcon-close"})])],1),i("v-uni-video",{attrs:{src:t.curVideo}})],1):t._e()],1)},a=[]},be3e:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac1f"),i("5319"),i("e25e"),i("fb6a"),i("5b81"),i("c975"),i("1276"),i("e9c4"),i("99af");var s=i("625a"),a={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,page:1,moreText:"加载更多",isLoad:0,token:"",spaceList:[],searchText:"",type:0,vipDiscount:0,currencyName:"",group:"",uid:0,isPlay:!1,curVideo:""}},onPullDownRefresh:function(){this.page=1,this.getSpaceList(!1);setTimeout((function(){uni.stopPullDownRefresh()}),1e3)},onReachBottom:function(){0==this.isLoad&&this.loadMore()},onShow:function(){if(this.page=1,s.localStorage.getItem("token")&&(this.token=s.localStorage.getItem("token"),this.getSpaceList(!1)),s.localStorage.getItem("userinfo")){var t=JSON.parse(s.localStorage.getItem("userinfo"));this.group=t.group}},onLoad:function(){this.currencyName=this.$API.getCurrencyName(),s.localStorage.getItem("token")&&(this.token=s.localStorage.getItem("token"),this.getSpaceList(!1))},methods:{back:function(){uni.navigateBack({delta:1})},loadMore:function(){this.moreText="正在加载中...",this.isLoad=1,this.getSpaceList(!0)},toType:function(t){this.type=t,this.page=1,this.moreText="加载更多",this.isLoad=0,this.spaceList=[],this.getSpaceList(!1)},previewImage:function(t,e){uni.previewImage({urls:t,current:e})},goPlay:function(t){this.curVideo=t,this.isPlay=!0},subText:function(t,e){return t.length<null?t.substring(0,e)+"……":t},replaceSpecialChar:function(t){return t=t.replace(/&quot;/g,'"'),t=t.replace(/&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&nbsp;/g," "),t},formatDate:function(t){t=new Date(parseInt(1e3*t));var e=t.getFullYear(),i=("0"+(t.getMonth()+1)).slice(-2),s=("0"+t.getDate()).slice(-2),a=("0"+t.getHours()).slice(-2),n=("0"+t.getMinutes()).slice(-2),o=e+"-"+i+"-"+s+" "+a+":"+n;return o},formatNumber:function(t){return t>=1e3&&t<1e4?(t/1e3).toFixed(1)+"k":t>=1e4?(t/1e4).toFixed(1)+"w":t},markHtml:function(t){t=this.replaceAll(t,"<","&lt;"),t=this.replaceAll(t,">","&gt;");var e=this.owoList;for(var i in e)-1!=this.replaceSpecialChar(t).indexOf(e[i].data)&&(t=this.replaceAll(this.replaceSpecialChar(t),e[i].data,"<img src='/"+e[i].icon+"' class='tImg' />"));return t=this.replaceAll(t,"/r/n","<br>"),t=this.TransferString(t),t},TransferString:function(t){var e=t;try{e=e.replace(/\r\n/g,"<br>"),e=e.replace(/\n/g,"<br>")}catch(i){return t}return e},replaceAll:function(t,e,i){return t.split(e).join(i)},searchTag:function(){this.searchText;this.page=1,this.getSpaceList()},searchClose:function(){this.searchText="",this.page=1,this.getSpaceList()},getSpaceList:function(t){var e=this,i=e.page;t&&i++;var a=0;if(s.localStorage.getItem("userinfo")){var n=JSON.parse(s.localStorage.getItem("userinfo"));n.token,a=n.uid}var o={status:e.type,uid:a};e.$Net.request({url:e.$API.spaceList(),data:{searchParams:JSON.stringify(e.$API.removeObjectEmptyKey(o)),limit:10,page:i,order:"created",isManage:1,token:e.token},method:"get",dataType:"json",success:function(i){if(e.isLoading=1,e.isLoad=0,e.moreText="加载更多",t||(e.dataLoad=!0),1==i.data.code){var s,a=i.data.data;for(var n in a){if(0==a[n].type)if(a[n].pic){var o=a[n].pic;a[n].picList=o.split("||")}else a[n].picList=[];if(2==a[n].type)if(a[n].forwardJson.pic){o=a[n].forwardJson.pic;a[n].forwardJson.picList=o.split("||")}else a[n].forwardJson.picList=[]}s=a,a.length>0?t?(e.page++,e.spaceList=e.spaceList.concat(s)):e.spaceList=s:e.moreText="没有更多动态了"}},fail:function(t){e.isLoading=1,e.moreText="加载更多",e.isLoad=0}})},toDelete:function(t){var e=this,i="";if(s.localStorage.getItem("userinfo")){var a=JSON.parse(s.localStorage.getItem("userinfo"));i=a.token}var n={id:t,token:i};uni.showModal({title:"确定要删除该动态吗",success:function(t){t.confirm?(uni.showLoading({title:"加载中"}),e.$Net.request({url:e.$API.spaceDelete(),data:n,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:t.data.msg,icon:"none"}),1==t.data.code&&(e.page=1,e.getSpaceList(!1))},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"})}})):t.cancel&&console.log("用户点击取消")}})},toInfo:function(t){uni.navigateTo({url:"/pages/space/info?id="+t})},forward:function(t){uni.navigateTo({url:"/pages/space/post?type=2&id="+t})},goShopInfo:function(t){uni.navigateTo({url:"/pages/shop/shopinfo?sid="+t})},toUserContents:function(t){var e=t.name,i=t.name+"的信息",s=t.uid;uni.navigateTo({url:"/pages/contents/userinfo?title="+i+"&name="+e+"&uid="+s+"&avatar="+encodeURIComponent(t.avatar)})},goContentInfo:function(t){if("publish"!=t.status)return uni.showToast({title:"文章正在审核中，请稍后再试！",icon:"none",duration:1e3,position:"bottom"}),!1;uni.navigateTo({url:"/pages/contents/info?cid="+t.cid+"&title="+t.title})}}};e.default=a}}]);
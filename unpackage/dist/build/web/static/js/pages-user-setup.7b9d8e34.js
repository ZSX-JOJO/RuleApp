(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-setup"],{"0cbd":function(t,e,a){"use strict";a.r(e);var i=a("8960"),n=a("9a5a");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);var o=a("f0c5"),l=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"5323660c",null,!1,i["a"],void 0);e["default"]=l.exports},"28f1":function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("625a"),n={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,modalName:null,localdata:"",systemBan:"-1",versionCode:0,wgtVer:"",Update:0,versionUrl:"",userInfo:null,token:"",code:"",name:""}},onPullDownRefresh:function(){},onShow:function(){i.localStorage.getItem("userinfo")&&(this.userInfo=JSON.parse(i.localStorage.getItem("userinfo")),this.name=this.userInfo.name)},onLoad:function(){i.localStorage.getItem("token")&&(this.token=i.localStorage.getItem("token")),this.get_cache_size(),this.getUserData()},methods:{back:function(){uni.navigateBack({delta:1})},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=null},rmlocal:function(){var t=this;uni.showModal({title:"提示",content:"是否清除缓存？",success:function(e){e.confirm?t.closeLocal():e.cancel&&console.log("用户点击取消")}})},getUserData:function(){var t=this;t.$Net.request({url:t.$API.getUserData(),data:{token:t.token},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){1==e.data.code&&(t.systemBan=e.data.data.systemBan)},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"})}})},closeLocal:function(){var t="",e="";i.localStorage.getItem("userinfo")&&(t=i.localStorage.getItem("userinfo"),e=i.localStorage.getItem("token")),i.localStorage.clear(),uni.showToast({title:"操作成功！",icon:"none",duration:1e3,position:"bottom"}),this.localdata="0 KB",i.localStorage.setItem("userinfo",t),i.localStorage.setItem("token",e)},get_cache_size:function(){var t=uni.getStorageInfoSync();t?this.localdata=t.currentSize+" KB":console.log("浏览器不支持localStorage")},logout:function(){var t=this;uni.showModal({title:"提示",content:"确认退出账户？",success:function(e){if(e.confirm){uni.showLoading({title:"加载中"});var a={token:t.token};t.$Net.request({url:t.$API.signOut(),data:a,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){if(setTimeout((function(){uni.hideLoading()}),1e3),1==t.data.code){i.localStorage.removeItem("userinfo"),i.localStorage.removeItem("token"),uni.showToast({title:"退出成功",icon:"none",duration:1e3,position:"bottom"});setTimeout((function(){uni.reLaunch({url:"/pages/home/home"}),clearTimeout("timer")}),1e3)}else uni.showToast({title:t.data.msg,icon:"none"})},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"})}})}else e.cancel}})},selfDelete:function(){var t=this,e="";if(i.localStorage.getItem("userinfo")){var a=JSON.parse(i.localStorage.getItem("userinfo"));e=a.token}var n={token:e};t.hideModal(),uni.showModal({title:"确定要注销自己的账号吗",success:function(e){e.confirm?(uni.showLoading({title:"加载中"}),t.$Net.request({url:t.$API.selfDelete(),data:n,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){if(setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:t.data.msg,icon:"none"}),1==t.data.code){i.localStorage.removeItem("userinfo"),i.localStorage.removeItem("token");setTimeout((function(){uni.reLaunch({url:"/pages/home/home"}),clearTimeout("timer")}),1e3)}},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"})}})):e.cancel&&console.log("用户点击取消")}})}}};e.default=n},8960:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"user",class:t.$store.state.AppStyle},[a("v-uni-view",{staticClass:"header",style:[{height:t.CustomBar+"px"}]},[a("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-back"})],1),a("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t._v("设置")]),a("v-uni-view",{staticClass:"action"})],1)],1),a("v-uni-view",{style:[{padding:t.NavBar+"px 10px 0px 10px"}]}),a("v-uni-view",{staticClass:"cu-list menu margin-top"},[""!=t.token?[a("v-uni-view",{staticClass:"cu-item"},[a("v-uni-view",{staticClass:"content"},[a("v-uni-text",[t._v("账号状态"),a("v-uni-text",{staticClass:"cuIcon-question margin-left-xs",attrs:{"data-target":"Modal"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showModal.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"action"},[-1==t.systemBan?[a("v-uni-text",{staticClass:"text-blue"},[t._v("获取中…")])]:t._e(),1==t.systemBan?[a("v-uni-text",{staticClass:"text-red"},[t._v("功能限制")])]:t._e(),0==t.systemBan?[a("v-uni-text",{staticClass:"text-green"},[t._v("正常")])]:t._e()],2)],1),a("v-uni-view",{staticClass:"cu-item"},[a("v-uni-view",{staticClass:"content"},[a("v-uni-text",[t._v("注销账户"),a("v-uni-text",{staticClass:"cuIcon-question margin-left-xs",attrs:{"data-target":"deleteTips"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showModal.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"action"},[a("v-uni-text",{staticClass:"text-blue",attrs:{"data-target":"deleteUser"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showModal.apply(void 0,arguments)}}},[t._v("申请注销")])],1)],1)]:t._e(),a("v-uni-view",{staticClass:"cu-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.rmlocal.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"content"},[a("v-uni-text",[t._v("清除缓存")])],1),a("v-uni-view",{staticClass:"action"},[a("v-uni-text",{staticClass:"text-gray"},[t._v(t._s(t.localdata))])],1)],1)],2),""!=t.token?a("v-uni-view",{staticClass:"logout",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.logout.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"logout-main"},[a("v-uni-text",{staticClass:"text-red"},[t._v("退出登录")])],1)],1):t._e(),a("v-uni-view",{staticClass:"cu-modal",class:"Modal"==t.modalName?"show":""},[a("v-uni-view",{staticClass:"cu-dialog"},[a("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[a("v-uni-view",{staticClass:"content"},[t._v("账号状态说明")]),a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),a("v-uni-view",{staticClass:"padding-xl text-left"},[t._v("如果您的账号存在刷评论、文章、动态，或频繁出现疑似非人工操作行为，即会进入"),a("v-uni-text",{staticClass:"text-red text-bold"},[t._v("功能限制")]),t._v("状态，该状态持续时间为10-30分钟，期间平台内部分功能将操作受限，并且无法以任何方式解除。")],1)],1)],1),a("v-uni-view",{staticClass:"cu-modal",class:"deleteTips"==t.modalName?"show":""},[a("v-uni-view",{staticClass:"cu-dialog"},[a("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[a("v-uni-view",{staticClass:"content"},[t._v("用户注销说明")]),a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),a("v-uni-view",{staticClass:"padding-xl text-left"},[t._v("申请注销后，您的用户信息将从本平台数据库删除，但您发布的文章等信息将继续保留，此时内容作者将不在提示具体信息，将以“账号已注销”代替。如您需要删除您发布的所有信息，可联系管理员处理。")])],1)],1),a("v-uni-view",{staticClass:"cu-modal bottom-modal",class:"deleteUser"==t.modalName?"show":""},[a("v-uni-view",{staticClass:"cu-dialog"},[a("v-uni-view",{staticClass:"cu-bar bg-white"},[a("v-uni-view",{staticClass:"action"},[t._v("注销账户")]),a("v-uni-view",{staticClass:"action text-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[t._v("取消")])],1),a("v-uni-view",{staticClass:"padding-top padding-bottom text-left"},[a("v-uni-form",[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("用户名")]),a("v-uni-input",{attrs:{name:"input",disabled:"disabled",value:t.name}})],1),a("v-uni-view",{staticClass:"all-btn"},[a("v-uni-view",{staticClass:"user-btn flex flex-direction"},[a("v-uni-button",{staticClass:"cu-btn bg-blue margin-tb-sm lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selfDelete()}}},[t._v("确认注销")])],1)],1)],1)],1)],1)],1)],1)},n=[]},"9a5a":function(t,e,a){"use strict";a.r(e);var i=a("28f1"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-contents-contentlist"],{"3ef1":function(t,e,i){"use strict";i.r(e);var a=i("b255"),n=i("f3f3e");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);var o=i("f0c5"),r=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"4c92fb11",null,!1,a["a"],void 0);e["default"]=r.exports},"6f6e":function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("e9c4"),i("99af"),i("c975"),i("14d9");var a=i("625a"),n={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,title:"",type:"",id:0,contentsList:[],page:1,moreText:"加载更多",isLoad:0,metaList:[{mid:0,name:"全部",parent:0}],topList:[{order:"commentsNum",name:"评论榜",parent:0},{order:"views",name:"点击榜",parent:0},{order:"likes",name:"喜欢榜",parent:0}],orderCur:"commentsNum",TabCur:0,scrollLeft:0,isLoading:0}},onPullDownRefresh:function(){},onReachBottom:function(){0==this.isLoad&&this.loadMore()},onShow:function(){},onLoad:function(t){this.title=t.title,this.type=t.type,this.id=t.id,""!=t.type&&("meta"==this.type?this.getMetaContents(!1,this.id):(this.type,this.getContentsList(!1,this.type,this.id))),"all"==t.type&&this.getMetaList()},methods:{allCache:function(){this.TabCur},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.id=t.currentTarget.dataset.id,this.page=1,this.scrollLeft=60*(t.currentTarget.dataset.id-1),0==this.TabCur?this.getContentsList(!1,"all",0):this.getMetaContents(!1,this.TabCur)},topSelect:function(t){this.orderCur=t.currentTarget.dataset.order,this.page=1,this.getContentsList(!1,"all",0)},back:function(){uni.navigateBack({delta:1})},loadMore:function(){this.moreText="正在加载中...",this.isLoad=1,"meta"==this.type?this.getMetaContents(!0,this.id):"all"==this.type?0==this.id?this.getContentsList(!0,this.type,this.id):this.getMetaContents(!0,this.id):(this.type,this.getContentsList(!0,this.type,this.id))},getMetaList:function(){var t=this;t.$Net.request({url:t.$API.getMetasList(),data:{searchParams:JSON.stringify(t.$API.removeObjectEmptyKey({type:"category"})),limit:15,page:1},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"post",dataType:"json",success:function(e){if(1==e.data.code){var i=e.data.data;i.length>0&&(t.metaList=t.metaList.concat(i))}setTimeout((function(){t.isLoading=1,clearTimeout("timer")}),300)},fail:function(e){uni.showToast({title:"网络开小差了哦",icon:"none"});setTimeout((function(){t.isLoading=1,clearTimeout("timer")}),300)}})},getContentsList:function(t,e,i){var n=this,s={type:"post"},o="created";"user"==e&&(s={type:"post",authorId:n.id}),"top"==n.type&&(o=n.orderCur);var r=n.page;t?r++:n.contentsList=[];var c="";if(a.localStorage.getItem("userinfo")){var l=JSON.parse(a.localStorage.getItem("userinfo"));c=l.token}var u={searchParams:JSON.stringify(n.$API.removeObjectEmptyKey(s)),limit:5,page:r,order:o,token:c};n.$Net.request({url:n.$API.getContentsList(),data:u,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"post",dataType:"json",success:function(e){if(n.moreText="加载更多",n.isLoad=0,1==e.data.code){var i=e.data.data;if(i.length>0){var s=e.data.data.length,o=Math.floor(Math.random()*s),r=null;if(a.localStorage.getItem("pushAds")){var c=JSON.parse(a.localStorage.getItem("pushAds")),l=c.length;if(l>0){var u=Math.floor(Math.random()*l);r=c[u],r.isAds=1}}var d=[],f=n.$API.GetFields();for(var p in i){var h=i[p].fields;if(h.length>0)for(var m in h)-1!=f.indexOf(h[m].name)&&(i[p][h[m].name]=h[m].strValue);d.push(i[p]);var v=Math.round(Math.random());1==v&&p==o&&null!=r&&d.push(r)}t?(n.page++,n.contentsList=n.contentsList.concat(d)):n.contentsList=d}else n.moreText="没有更多文章了"}setTimeout((function(){n.isLoading=1,clearTimeout("timer")}),300)},fail:function(t){n.moreText="加载更多",n.isLoad=0,uni.showToast({title:"网络开小差了哦",icon:"none"});setTimeout((function(){n.isLoading=1,clearTimeout("timer")}),300)}})},getMetaContents:function(t,e){var i=this,n={mid:e},s="";if(a.localStorage.getItem("userinfo")){var o=JSON.parse(a.localStorage.getItem("userinfo"));s=o.token}var r=i.page;t&&r++,i.$Net.request({url:i.$API.getMetaContents(),data:{searchParams:JSON.stringify(i.$API.removeObjectEmptyKey(n)),limit:5,page:r,order:"created",token:s},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"post",dataType:"json",success:function(n){if(i.isLoad=0,i.moreText="加载更多",1==n.data.code){var s=n.data.data;if(s.length>0){var o=[],r=i.$API.GetFields();for(var c in s){var l=s[c].fields;if(l.length>0)for(var u in l)-1!=r.indexOf(l[u].name)&&(s[c][l[u].name]=l[u].strValue);o.push(s[c])}t?(i.page++,i.contentsList=i.contentsList.concat(o)):i.contentsList=o,a.localStorage.setItem("contentsList_"+e,JSON.stringify(i.contentsList))}else i.moreText="没有更多文章了"}setTimeout((function(){i.isLoading=1,clearTimeout("timer")}),300)},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"});setTimeout((function(){i.isLoading=1,clearTimeout("timer")}),300);i.moreText="加载更多",i.isLoad=0}})},toSearch:function(){uni.navigateTo({url:"/pages/contents/search"})}}};e.default=n},b255:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"user",class:t.AppStyle},[a("v-uni-view",{staticClass:"header",style:[{height:t.CustomBar+"px"}]},[a("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-back"})],1),a("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t._v(t._s(t.title))]),a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toSearch.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-search"})],1)],1)],1),a("v-uni-view",{style:[{padding:t.NavBar+"px 10px 0px 10px"}]}),"all"==t.type?a("v-uni-scroll-view",{staticClass:"bg-white nav metaList",staticStyle:{"margin-top":"20upx"},attrs:{"scroll-x":!0,"scroll-with-animation":!0,"scroll-left":t.scrollLeft}},t._l(t.metaList,(function(e,i){return 0==e.parent?a("v-uni-view",{key:i,staticClass:"cu-item",class:e.mid==t.TabCur?"text-blue cur":"",attrs:{"data-id":e.mid},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabSelect.apply(void 0,arguments)}}},[t._v(t._s(e.name))]):t._e()})),1):t._e(),a("v-uni-view",{staticClass:"cu-card article no-card"},["top"==t.type?a("v-uni-scroll-view",{staticClass:"bg-white nav metaList",staticStyle:{"margin-top":"20upx"},attrs:{"scroll-x":!0,"scroll-with-animation":!0,"scroll-left":t.scrollLeft}},t._l(t.topList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"cu-item",class:e.order==t.orderCur?"text-blue cur":"",attrs:{"data-order":e.order},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.topSelect.apply(void 0,arguments)}}},[t._v(t._s(e.name))])})),1):t._e(),t._l(t.contentsList,(function(t,e){return[a("articleItem",{key:e+"_0",attrs:{item:t}})]})),t.contentsList.length>0?a("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[a("v-uni-text",[t._v(t._s(t.moreText))])],1):t._e(),0==t.contentsList.length?a("v-uni-view",{staticClass:"no-data"},[a("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有数据")],1):t._e()],2),0==t.isLoading?a("v-uni-view",{staticClass:"loading"},[a("v-uni-view",{staticClass:"loading-main"},[a("v-uni-image",{attrs:{src:i("14d6")}})],1)],1):t._e()],1)},n=[]},f3f3e:function(t,e,i){"use strict";i.r(e);var a=i("6f6e"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a}}]);
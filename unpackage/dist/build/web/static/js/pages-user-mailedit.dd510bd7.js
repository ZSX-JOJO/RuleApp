(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-mailedit"],{"87b4":function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("d401"),i("d3b7"),i("25f0"),i("e9c4");var n=i("625a"),a=(i("2178"),i("a947"),{data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,uid:0,name:"",mail:"",code:"",times:60,show:!0,isEmail:1,token:""}},onPullDownRefresh:function(){},onShow:function(){this.getCacheInfo(),this.regConfig()},onLoad:function(){this.getCacheInfo()},methods:{back:function(){uni.navigateBack({delta:1})},getCacheInfo:function(){if(n.localStorage.getItem("userinfo")){var t=JSON.parse(n.localStorage.getItem("userinfo"));this.uid=t.uid,this.name=t.name,this.token=t.token}},userEdit:function(){var t=this;if(""==t.mail||""==t.code)return uni.showToast({title:"请完整填写表单",icon:"none",duration:1e3,position:"bottom"}),!1;var e={uid:t.uid.toString(),name:t.name,mail:t.mail,code:t.code};uni.showLoading({title:"加载中"}),t.$Net.request({url:t.$API.userEdit(),data:{params:JSON.stringify(t.$API.removeObjectEmptyKey(e)),token:t.token},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:e.data.msg,icon:"none"}),1==e.data.code)if(""!=t.password){n.localStorage.removeItem("userinfo"),n.localStorage.removeItem("token");setTimeout((function(){uni.redirectTo({url:"/pages/home/index"}),clearTimeout("timer")}),1e3)}else{var i=JSON.parse(n.localStorage.getItem("userinfo"));i.screenName=t.screenName,i.url=t.url,n.localStorage.setItem("userinfo",JSON.stringify(i)),t.getCacheInfo()}},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"}),uni.stopPullDownRefresh()}})},RegSendCode:function(){var t=this;if(""==t.mail)return uni.showToast({title:"请输入邮箱",icon:"none",duration:1e3,position:"bottom"}),!1;var e={mail:t.mail};uni.showLoading({title:"加载中"}),t.$Net.request({url:t.$API.RegSendCode(),data:{params:JSON.stringify(t.$API.removeObjectEmptyKey(e))},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:e.data.msg,icon:"none"}),1==e.data.code&&t.getCode()},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"}),uni.stopPullDownRefresh()}})},getCode:function(){var t=this;this.show=!1,this.timer=setInterval((function(){t.times--,t.times<=0&&(t.show=!0,clearInterval(t.timer),t.times=60)}),1e3)},regConfig:function(){var t=this;t.$Net.request({url:t.$API.regConfig(),header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){1==e.data.code&&(t.isEmail=e.data.data.isEmail)},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"})}})}}});e.default=a},ad8a:function(t,e,i){"use strict";i.r(e);var n=i("bc3e"),a=i("f002");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);var s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"036bb986",null,!1,n["a"],void 0);e["default"]=u.exports},bc3e:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"user",class:t.AppStyle},[i("v-uni-view",{staticClass:"header",style:[{height:t.CustomBar+"px"}]},[i("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-back"})],1),i("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t._v("邮箱设置")]),i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.userEdit.apply(void 0,arguments)}}},[i("v-uni-button",{staticClass:"cu-btn round bg-blue"},[t._v("保存")])],1)],1)],1),i("v-uni-view",{style:[{padding:t.NavBar+"px 10px 0px 10px"}]}),i("v-uni-form",[i("v-uni-view",{staticClass:"cu-form-group margin-top"},[i("v-uni-view",{staticClass:"title"},[t._v("用户名")]),i("v-uni-input",{attrs:{name:"input",disabled:"disabled",value:t.name}})],1),i("v-uni-view",{staticClass:"cu-form-group",attrs:{"margin-top":!0}},[i("v-uni-view",{staticClass:"title"},[t._v("新邮箱")]),i("v-uni-input",{attrs:{placeholder:"请输入新邮箱",name:"input"},model:{value:t.mail,callback:function(e){t.mail=e},expression:"mail"}})],1),t.isEmail>0?i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("验证码")]),i("v-uni-input",{attrs:{placeholder:"填写新邮箱验证码",name:"input"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),t.show?i("v-uni-view",{staticClass:"sendcode text-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.RegSendCode.apply(void 0,arguments)}}},[t._v("发送")]):t._e(),t.show?t._e():i("v-uni-view",{staticClass:"sendcode text-gray"},[t._v(t._s(t.times)+"s")])],1):t._e()],1)],1)},a=[]},f002:function(t,e,i){"use strict";i.r(e);var n=i("87b4"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a}}]);
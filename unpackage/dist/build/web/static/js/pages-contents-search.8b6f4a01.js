(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-contents-search"],{"69e4":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-uni-view",{staticClass:"userpost",class:t.AppStyle},[s("v-uni-view",{staticClass:"header",style:[{height:t.CustomBar+"px"}]},[s("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[s("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[s("v-uni-text",{staticClass:"cuIcon-back"})],1),s("v-uni-view",{staticClass:"search-form radius",style:[{top:t.StatusBar+"px"}]},[s("v-uni-text",{staticClass:"cuIcon-search"}),s("v-uni-input",{attrs:{"adjust-position":!1,type:"text",placeholder:"搜索文章、评论、用户","confirm-type":"search"},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),""!=t.searchText?s("v-uni-view",{staticClass:"search-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.searchClose()}}},[s("v-uni-text",{staticClass:"cuIcon-close"})],1):t._e()],1),s("v-uni-view",{staticClass:"action"},[s("v-uni-text",{staticClass:"text-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.searchTag()}}},[t._v("搜索")])],1)],1)],1),s("v-uni-view",{style:[{padding:t.NavBar+"px 10px 0px 10px"}]}),s("v-uni-view",{staticClass:"all-box"},[s("v-uni-view",{staticClass:"search-type grid col-4"},[s("v-uni-view",{staticClass:"search-type-box",class:0==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toType(0)}}},[s("v-uni-text",[t._v("文章")])],1),s("v-uni-view",{staticClass:"search-type-box",class:1==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toType(1)}}},[s("v-uni-text",[t._v("评论")])],1),s("v-uni-view",{staticClass:"search-type-box",class:3==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toType(3)}}},[s("v-uni-text",[t._v("动态")])],1),s("v-uni-view",{staticClass:"search-type-box",class:2==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toType(2)}}},[s("v-uni-text",[t._v("用户")])],1)],1),0==t.type?s("v-uni-view",{staticClass:"cu-card article no-card"},[t._l(t.contentsList,(function(e,i){return 0==t.type?[s("articleItem",{key:i+"_0",attrs:{item:e}})]:t._e()})),t.contentsList.length>0?s("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[s("v-uni-text",[t._v(t._s(t.moreText))])],1):t._e(),0==t.contentsList.length?s("v-uni-view",{staticClass:"no-data"},[s("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有数据")],1):t._e()],2):t._e(),1==t.type?s("v-uni-view",{staticClass:"cu-list menu-avatar"},[0==t.commentsList.length?s("v-uni-view",{staticClass:"no-data"},[s("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有评论")],1):t._e(),s("v-uni-view",{staticClass:"cu-card dynamic no-card",staticStyle:{"margin-top":"20upx"}},[t._l(t.commentsList,(function(e,i){return t.commentsList.length>0?[s("commentItem",{key:i+"_0",attrs:{item:e}})]:t._e()}))],2),t.commentsList.length>0?s("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[s("v-uni-text",[t._v(t._s(t.moreText))])],1):t._e()],1):t._e(),3==t.type?s("v-uni-view",{staticClass:"search-space"},[0==t.spaceList.length?s("v-uni-view",{staticClass:"no-data"},[s("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有动态")],1):t._e(),s("spaceItem",{attrs:{spaceList:t.spaceList}}),t.spaceList.length>0?s("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[s("v-uni-text",[t._v(t._s(t.moreText))])],1):t._e()],1):t._e(),2==t.type?s("v-uni-view",{staticClass:"cu-list menu-avatar userList",staticStyle:{"margin-top":"4upx"}},[0==t.userList.length?s("v-uni-view",{staticClass:"no-data"},[s("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有数据")],1):t._e(),t._l(t.userList,(function(e,i){return s("v-uni-view",{key:i,staticClass:"cu-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toUserContents(e)}}},[s("v-uni-view",{staticClass:"cu-avatar round lg",style:e.style}),s("v-uni-view",{staticClass:"content"},[e.screenName?s("v-uni-view",{staticClass:"text-grey"},[t._v(t._s(e.screenName)),"contributor"==e.groupKey||"administrator"==e.groupKey?s("v-uni-text",{staticClass:"cuIcon-lightfill"}):t._e()],1):s("v-uni-view",{staticClass:"text-grey"},[t._v(t._s(e.name)),"contributor"==e.groupKey||"administrator"==e.groupKey?s("v-uni-text",{staticClass:"cuIcon-lightfill"}):t._e()],1),s("v-uni-view",{staticClass:"text-gray text-sm flex"},[s("v-uni-view",{staticClass:"text-cut"},[t._v(t._s(t.subText(e.introduce,100)))])],1)],1),s("v-uni-view",{staticClass:"action goUserIndex"},[s("v-uni-view",{staticClass:"cu-btn bg-gradual-red"},[t._v("主页")])],1)],1)})),s("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[s("v-uni-text",[t._v(t._s(t.moreText))])],1)],2):t._e()],1),0==t.isLoading||0==t.changeLoading?s("v-uni-view",{staticClass:"loading"},[s("v-uni-view",{staticClass:"loading-main"},[s("v-uni-image",{attrs:{src:i("14d6")}})],1)],1):t._e()],1)},a=[]},7858:function(t,e,i){"use strict";i.r(e);var s=i("9eb0"),a=i.n(s);for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);e["default"]=a.a},"9eb0":function(t,e,i){"use strict";i("7a82");var s=i("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("fc11"));i("e9c4"),i("99af"),i("14d9"),i("e25e"),i("fb6a"),i("ac1f"),i("5319");var n=i("625a"),o={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,contentsList:[],commentsList:[],userList:[],spaceList:[],searchText:"",type:0,page:1,moreText:"加载更多",isLoad:0,isLoading:0,changeLoading:1}},onPullDownRefresh:function(){this.page=1,this.moreText="加载更多",this.isLoad=0,0==this.type?this.getContentsList(!1):1==this.type?this.getCommentsList(!1):2==this.type?this.getUserList(!1):this.getSpaceList(!1);setTimeout((function(){uni.stopPullDownRefresh()}),1e3)},onShow:function(){this.page=1,this.moreText="加载更多",this.isLoad=0,this.getContentsList(!1)},onReachBottom:function(){0==this.isLoad&&this.loadMore()},onLoad:function(){},methods:(0,a.default)({toType:function(t){this.type=t,this.page=1,this.moreText="加载更多",this.isLoad=0,0==t?this.getContentsList(!1):1==t?this.getCommentsList(!1):2==t?this.getUserList(!1):this.getSpaceList(!1)},back:function(){uni.navigateBack({delta:1})},loadMore:function(){this.moreText="正在加载中...",this.isLoad=1,0==this.type?this.getContentsList(!0):1==this.type?this.getCommentsList(!0):2==this.type?this.getUserList(!0):this.getSpaceList(!0)},reload:function(){0==this.type?this.getContentsList():1==this.type?this.getCommentsList():2==this.type?this.getUserList():this.getSpaceList()},searchTag:function(){this.changeLoading=0;this.searchText;this.page=1,0==this.type?this.getContentsList():1==this.type?this.getCommentsList():2==this.type?this.getUserList():this.getSpaceList()},searchClose:function(){this.searchText="",this.page=1,0==this.type?this.getContentsList():1==this.type?this.getCommentsList():2==this.type?this.getUserList():this.getSpaceList()},getContentsList:function(t){var e=this,i="";if(n.localStorage.getItem("userinfo")){var s=JSON.parse(n.localStorage.getItem("userinfo"));i=s.token}var a=e.page;t&&a++,e.$Net.request({url:e.$API.getContentsList(),data:{searchParams:JSON.stringify(e.$API.removeObjectEmptyKey({type:"post"})),limit:8,page:a,searchKey:e.searchText,order:"created",token:i},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"post",dataType:"json",success:function(i){if(e.changeLoading=1,e.isLoad=0,e.moreText="加载更多",1==i.data.code){var s=i.data.data;s.length>0?t?(e.page++,e.contentsList=e.contentsList.concat(s)):e.contentsList=s:e.moreText="没有更多数据了"}setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)},fail:function(t){e.changeLoading=1,e.moreText="加载更多",e.isLoad=0;setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)}})},getCommentsList:function(t){var e=this,i=e.page;t&&i++,e.$Net.request({url:e.$API.getCommentsList(),data:{searchParams:JSON.stringify(e.$API.removeObjectEmptyKey({type:"comment"})),limit:5,page:i,searchKey:e.searchText,order:"created"},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"post",dataType:"json",success:function(i){if(e.changeLoading=1,e.isLoad=0,1==i.data.code){var s=i.data.data;if(s.length>0){var a=[];for(var n in s){var o=s[n];o.style="background-image:url("+s[n].avatar+");",a.push(o)}t?(e.page++,e.commentsList=e.commentsList.concat(a)):e.commentsList=a}else e.moreText="没有更多数据了"}setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)},fail:function(t){e.changeLoading=1,e.isLoad=0,e.moreText="加载更多";setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)}})},getUserList:function(t){var e=this,i=e.page;t&&i++,e.$Net.request({url:e.$API.getUserList(),data:{searchParams:"",limit:10,page:i,searchKey:e.searchText,order:"created"},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"post",dataType:"json",success:function(i){if(e.changeLoading=1,e.isLoad=0,1==i.data.code){var s=i.data.data;if(s.length>0){var a=[];for(var n in s){var o=s[n];o.style="background-image:url("+s[n].avatar+");",a.push(o)}t?(e.page++,e.userList=e.userList.concat(a)):e.userList=a}else e.moreText="没有更多数据了"}setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)},fail:function(t){e.changeLoading=1,e.isLoad=0,e.moreText="加载更多";setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)}})},getSpaceList:function(t){var e=this,i="";if(n.localStorage.getItem("userinfo")){var s=JSON.parse(n.localStorage.getItem("userinfo"));i=s.token}var a=e.page;t&&a++,e.$Net.request({url:e.$API.spaceList(),data:{limit:10,page:a,order:"created",searchKey:e.searchText,token:i},method:"post",dataType:"json",success:function(i){if(e.changeLoading=1,e.isLoad=0,e.moreText="加载更多",t||(e.dataLoad=!0),1==i.data.code){var s,a=i.data.data;for(var n in a){if(0==a[n].type)if(a[n].pic){var o=a[n].pic;a[n].picList=o.split("||")}else a[n].picList=[];if(2==a[n].type)if(a[n].forwardJson.pic){o=a[n].forwardJson.pic;a[n].forwardJson.picList=o.split("||")}else a[n].forwardJson.picList=[]}s=a,a.length>0?t?(e.page++,e.spaceList=e.spaceList.concat(s)):e.spaceList=s:e.moreText="没有更多动态了"}},fail:function(t){e.changeLoading=1,e.isLoad=0,e.moreText="加载更多";setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)}})},toUserContents:function(t){var e=t.name,i=t.name+"的信息";t.screenName&&(i=t.screenName+" 的信息",e=t.screenName);var s=t.uid;uni.navigateTo({url:"/pages/contents/userinfo?title="+i+"&name="+e+"&uid="+s+"&avatar="+encodeURIComponent(t.avatar)})},commentsAdd:function(t,e,i){var s=this.cid;uni.navigateTo({url:"/pages/contents/commentsadd?cid="+s+"&coid="+e+"&title="+t+"&isreply="+i})},subText:function(t,e){return t.length<null?t.substring(0,e)+"……":t},formatDate:function(t){t=new Date(parseInt(1e3*t));var e=t.getFullYear(),i=("0"+(t.getMonth()+1)).slice(-2),s=("0"+t.getDate()).slice(-2),a=("0"+t.getHours()).slice(-2),n=("0"+t.getMinutes()).slice(-2),o=e+"-"+i+"-"+s+" "+a+":"+n;return o},toInfo:function(t){uni.navigateTo({url:"/pages/contents/info?cid="+t.cid+"&title="+t.title})},toInfoComment:function(t,e){uni.navigateTo({url:"/pages/contents/info?cid="+t+"&title="+e})},ToCopy:function(t){var e=document.createElement("textarea");e.value=t,e.readOnly="readOnly",document.body.appendChild(e),e.select(),e.setSelectionRange(0,t.length),uni.showToast({title:"复制成功"});document.execCommand("copy");e.remove()},formatNumber:function(t){return t>=1e3&&t<1e4?(t/1e3).toFixed(1)+"k":t>=1e4?(t/1e4).toFixed(1)+"w":t},replaceSpecialChar:function(t){return t=t.replace(/&quot;/g,'"'),t=t.replace(/&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&nbsp;/g," "),t}},"subText",(function(t,e){return t?t.length>e?(t=t.substring(0,e),t+"……"):t:"Ta还没有个人介绍哦"}))};e.default=o},c62c:function(t,e,i){"use strict";i.r(e);var s=i("69e4"),a=i("7858");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);var o=i("f0c5"),c=Object(o["a"])(a["default"],s["b"],s["c"],!1,null,"28ee865a",null,!1,s["a"],void 0);e["default"]=c.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-manage-shoptype"],{"050c":function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("14d9");var n=i("625a"),a={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,shopList:[],moreText:"加载更多",page:1,isLoading:0,token:""}},onPullDownRefresh:function(){this.page=1,this.getShopTypeList(!1);setTimeout((function(){uni.stopPullDownRefresh()}),1e3)},onLoad:function(){n.localStorage.getItem("token")&&(this.token=n.localStorage.getItem("token"))},onShow:function(){this.getShopTypeList(!1),this.page=1},methods:{back:function(){uni.navigateBack({delta:1})},loadMore:function(){this.moreText="正在加载中...",this.isLoad=1,this.getShopTypeList(!0)},toLink:function(t){if(!n.localStorage.getItem("token")||""==n.localStorage.getItem("token"))return uni.showToast({title:"请先登录哦",icon:"none"}),!1;uni.navigateTo({url:t})},getShopTypeList:function(t){var e=this;e.$Net.request({url:e.$API.shopTypeList(),data:{limit:50,page:1,token:e.token},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){if(uni.stopPullDownRefresh(),e.isLoad=0,1==t.data.code){var i=t.data.data,n=[];for(var a in i)0==i[a].parent&&(i[a].subList=[],n.push(i[a]));for(var o in i)if(0!=i[o].parent)for(var s in n)i[o].parent==n[s].id&&n[s].subList.push(i[o]);e.shopList=n}setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)},fail:function(t){uni.stopPullDownRefresh(),e.moreText="加载更多",e.isLoad=0;setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)}})},addSection:function(t,e){uni.navigateTo({url:"/pages/manage/shopTypeAdd?parent="+t+"&sort="+e})},toEdit:function(t,e,i,n){uni.navigateTo({url:"/pages/manage/shopTypeAdd?parent="+t+"&sort="+i+"&type=edit&id="+e+"&name="+n})},toDelete:function(t,e){var i=this,a="",o="确定要删除该分类吗？所有帖子数据都将丢失！";if("sort"==e&&(o="确定要删除该大类吗？下属分类将变为自由分类！"),n.localStorage.getItem("userinfo")){var s=JSON.parse(n.localStorage.getItem("userinfo"));a=s.token}var u={id:t,token:a};uni.showModal({title:o,success:function(t){t.confirm?(uni.showLoading({title:"加载中"}),i.$Net.request({url:i.$API.deleteShopType(),data:u,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:t.data.msg,icon:"none"}),1==t.data.code&&i.getSectionList()},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"})}})):t.cancel&&console.log("用户点击取消")}})}}};e.default=a},"1f00":function(t,e,i){"use strict";i.r(e);var n=i("050c"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"7e94":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"userpost",class:t.AppStyle},[i("v-uni-view",{staticClass:"header",style:[{height:t.CustomBar+"px"}]},[i("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-back"})],1),i("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t._v("商品分类")]),i("v-uni-view",{staticClass:"action"},[i("v-uni-button",{staticClass:"cu-btn round bg-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toLink("/pages/manage/shopTypeAdd")}}},[t._v("添加大类")])],1)],1)],1),i("v-uni-view",{style:[{padding:t.NavBar+"px 10px 0px 10px"}]}),t._l(t.shopList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"data-box"},[i("v-uni-view",{staticClass:"cu-bar bg-white"},[i("v-uni-view",{staticClass:"action data-box-title"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"action text-blue"},[i("v-uni-text",{staticClass:"text-green",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toEdit(e.parent,e.id,e.type)}}},[i("v-uni-text",{staticClass:"cuIcon-edit"}),i("v-uni-text",[t._v("编辑")])],1),i("v-uni-text",{staticClass:"text-red margin-left",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toDelete(e.id,e.type)}}},[i("v-uni-text",{staticClass:"cuIcon-delete"}),i("v-uni-text",[t._v("删除")])],1),i("v-uni-text",{staticClass:"margin-left",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.addSection(e.id,e.name)}}},[i("v-uni-text",{staticClass:"cuIcon-add"}),i("v-uni-text",[t._v("添加小类")])],1)],1)],1),i("v-uni-view",{staticClass:"shop-page"},t._l(e.subList,(function(n,a){return i("v-uni-view",{key:a,staticClass:"shop-page-box"},[i("v-uni-view",{staticClass:"shop-item-intro"},[i("v-uni-view",{staticClass:"shop-item-title"},[t._v(t._s(n.name))]),i("v-uni-view",{staticClass:"shop-item-value"},[t._v(t._s(n.intro)+" 商品")])],1),i("v-uni-view",{staticClass:"shop-page-btn"},[i("v-uni-view",{staticClass:"cu-btn text-blue",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toEdit(n.parent,n.id,n.type,e.name)}}},[t._v("编辑")]),i("v-uni-view",{staticClass:"cu-btn margin-left-sm text-red",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDelete(n.id,n.type)}}},[t._v("删除")])],1)],1)})),1)],1)}))],2)},a=[]},a158:function(t,e,i){"use strict";i.r(e);var n=i("7e94"),a=i("1f00");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);var s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"72d4181a",null,!1,n["a"],void 0);e["default"]=u.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-shopinfo"],{2649:function(t,e,i){"use strict";i.r(e);var a=i("91e8"),n=i("9e8f");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);var o=i("f0c5"),u=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"e5f66024",null,!1,a["a"],void 0);e["default"]=u.exports},"91e8":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={mpHtml:i("631a").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"user",class:t.$store.state.AppStyle},[a("v-uni-view",{staticClass:"header",style:[{height:t.CustomBar+"px"}]},[a("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-back"})],1),a("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t._v("商品详情")]),a("v-uni-view",{staticClass:"action"})],1)],1),a("v-uni-view",{style:[{padding:t.NavBar+"px 10px 0px 10px"}]}),a("v-uni-view",{staticClass:"info",staticStyle:{"margin-top":"10upx"}},[a("v-uni-view",{staticClass:"shopinfo-img"},[a("v-uni-image",{attrs:{src:t.imgurl,mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImage(t.imgurl)}}})],1),a("v-uni-view",{staticClass:"shopinfo-title"},[t._v(t._s(t.title))]),t.integral>0?a("v-uni-view",{staticClass:"shopinfo-tips"},[a("v-uni-text",{staticClass:"text-green"},[t._v("该商品支持"+t._s(t.integral)+"积分抵扣")])],1):t._e(),a("v-uni-view",{staticClass:"shopinfo-info"},[a("v-uni-text",{staticClass:"text-sm shop-user text-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toUserContents(t.userInfo)}}},[""!=t.userInfo.screenName?[t._v(t._s(t.userInfo.screenName))]:[t._v(t._s(t.userInfo.name))]],2),a("v-uni-text",{staticClass:"text-sm text-right text-gray"},[t._v("剩余"+t._s(t.num))]),a("v-uni-text",{staticClass:"text-sm text-right text-gray margin-left-xs"},[t._v("已售出"+t._s(t.sellNum))])],1),a("v-uni-view",{staticClass:"info-content shop-content"},[1==t.shopIsMd?[a("mp-html",{attrs:{content:t.html,selectable:!0,"show-img-menu":!0,"lazy-load":!0,ImgCache:!0,markdown:!0}})]:t._e(),0==t.shopIsMd?[a("mp-html",{attrs:{content:t.html,selectable:!0,"show-img-menu":!0,"lazy-load":!0,ImgCache:!0,markdown:!1}})]:t._e()],2)],1),0==t.isBuy||1==t.type?a("v-uni-view",{staticClass:"shopinfo-bar grid col-2"},[a("v-uni-view",{staticClass:"shopinfo-price"},[1==t.isvip?[t._v(t._s(parseInt(t.price*t.vipDiscount))+" "+t._s(t.currencyName)),a("v-uni-text",{staticClass:"text-yellow margin-left text-sm"},[t._v("VIP优惠")])]:[t._v(t._s(t.price)+" "+t._s(t.currencyName))]],2),a("v-uni-view",{staticClass:"shopinfo-btn"},[a("v-uni-text",{staticClass:"cu-btn bg-blue radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.shopBuy.apply(void 0,arguments)}}},[t._v("立即购买")])],1)],1):t._e(),1==t.isBuy&&1!=t.type?a("v-uni-view",{staticClass:"shopinfo-bar grid col-2"},[a("v-uni-view",{staticClass:"shopinfo-price"},[t._v("已购买")]),a("v-uni-view",{staticClass:"shopinfo-btn"},[a("v-uni-text",{staticClass:"cu-btn bg-blue radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toInfo.apply(void 0,arguments)}}},[t._v("查看详情")])],1)],1):t._e(),0==t.isLoading?a("v-uni-view",{staticClass:"loading"},[a("v-uni-view",{staticClass:"loading-main"},[a("v-uni-image",{attrs:{src:i("14d6")}})],1)],1):t._e()],1)},s=[]},"9e8f":function(t,e,i){"use strict";i.r(e);var a=i("bc3d"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},bc3d:function(t,e,i){"use strict";i("7a82");var a=i("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("14d9");var n=a(i("631a")),s=i("625a"),o={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,userInfo:"",sid:0,title:"",html:"",markdownData:{},price:"",num:"",sellNum:"",imgurl:"",integral:0,isLoading:0,shopIsMd:-1,isBuy:0,shopinfo:{},vipDiscount:0,vipPrice:0,scale:0,isvip:0,vip:0,currencyName:""}},components:{mpHtml:n.default},onReachBottom:function(){},onShow:function(){this.getVipInfo(),this.userStatus()},onPullDownRefresh:function(){this.getInfo(this.sid),this.isBuyShop(this.sid)},onLoad:function(t){this.currencyName=this.$API.getCurrencyName(),t.sid&&(this.sid=t.sid,this.getInfo(this.sid))},methods:{back:function(){uni.navigateBack({delta:1})},getInfo:function(t){var e=this,i={key:e.sid};e.$Net.request({url:e.$API.shopInfo(),data:i,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){uni.stopPullDownRefresh(),e.shopinfo=t.data,e.shopIsMd=t.data.isMd,e.title=t.data.title,e.type=t.data.type,e.html=t.data.text,e.imgurl=t.data.imgurl,e.integral=t.data.integral,e.price=t.data.price,e.num=t.data.num,e.sellNum=t.data.sellNum,e.vipDiscount=t.data.vipDiscount,1!=t.data.type&&e.isBuyShop(e.sid),e.getUserInfo(t.data.uid);setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)},fail:function(t){uni.stopPullDownRefresh(),uni.showToast({title:"网络开小差了哦",icon:"none"});setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)}})},previewImage:function(t){var e=[];e.push(t),uni.previewImage({urls:e,current:e[0]})},shopBuy:function(){uni.navigateTo({url:"/pages/shop/orderpay?sid="+this.sid})},getUserInfo:function(t){var e=this,i={key:t};e.$Net.request({url:e.$API.getUserInfo(),data:i,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){1==t.data.code&&(e.userInfo=t.data.data,e.userInfo.style="background-image:url("+t.data.data.avatar+");")},fail:function(t){}})},toInfo:function(){var t=this.shopinfo;1==t.type?uni.showToast({title:"实体商品请留意快递信息",icon:"none"}):uni.navigateTo({url:"/pages/shop/shoptext?sid="+t.id})},isBuyShop:function(t){var e=this,i="";if(s.localStorage.getItem("userinfo")){var a=JSON.parse(s.localStorage.getItem("userinfo"));i=a.token}var n={sid:e.sid,token:i};e.$Net.request({url:e.$API.isBuyShop(),data:n,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){1==t.data.code&&(e.isBuy=1)},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"})}})},toUserContents:function(t){var e=t.name,i=t.name+"的信息";t.screenName&&(i=t.screenName+" 的信息",e=t.screenName);var a=t.uid;uni.navigateTo({url:"/pages/contents/userinfo?title="+i+"&name="+e+"&uid="+a+"&avatar="+encodeURIComponent(t.avatar)})},getVipInfo:function(){var t=this;t.$Net.request({url:t.$API.getVipInfo(),header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){1==e.data.code&&(t.vipPrice=e.data.data.vipPrice,t.scale=e.data.data.scale);setTimeout((function(){t.isLoading=1,clearTimeout("timer")}),300)},fail:function(e){setTimeout((function(){t.isLoading=1,clearTimeout("timer")}),300)}})},userStatus:function(){var t=this,e="";if(s.localStorage.getItem("userinfo")){var i=JSON.parse(s.localStorage.getItem("userinfo"));e=i.token}t.$Net.request({url:t.$API.userStatus(),data:{token:e},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){1==e.data.code&&(t.vip=e.data.data.vip,t.isvip=e.data.data.isvip)},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"})}})}}};e.default=o}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-order"],{"296c":function(t,e,n){"use strict";n.r(e);var i=n("2973"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},2973:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("e25e"),n("fb6a");var i=n("625a"),a={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,isLoad:0,token:"",orderList:[],merchantEmail:"",modalName:null,isLoading:0}},onPullDownRefresh:function(){setTimeout((function(){uni.stopPullDownRefresh()}),1e3)},onShow:function(){i.localStorage.getItem("token")&&(this.token=i.localStorage.getItem("token")),this.getOrderList()},onLoad:function(){},methods:{back:function(){uni.navigateBack({delta:1})},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=null},getType:function(t){return["实体商品","源码","软件工具","付费阅读"][t-1]},getOrderList:function(){var t=this,e={token:t.token};t.$Net.request({url:t.$API.orderList(),data:e,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(1==e.data.code){var n=e.data.data;n.length>0&&(t.orderList=n)}setTimeout((function(){t.isLoading=1,clearTimeout("timer")}),300)},fail:function(e){uni.showToast({title:"网络开小差了哦",icon:"none"});setTimeout((function(){t.isLoading=1,clearTimeout("timer")}),300)}})},shopInfo:function(t){uni.navigateTo({url:"/pages/shop/shopinfo?sid="+t})},toInfo:function(t){1==t.type?uni.showToast({title:"实体商品请留意快递信息",icon:"none"}):uni.navigateTo({url:"/pages/shop/shoptext?sid="+t.id})},formatDate:function(t){t=new Date(parseInt(1e3*t));var e=t.getFullYear(),n=("0"+(t.getMonth()+1)).slice(-2),i=("0"+t.getDate()).slice(-2),a=("0"+t.getHours()).slice(-2),s=("0"+t.getMinutes()).slice(-2),o=e+"-"+n+"-"+i+" "+a+":"+s;return o},toMerchant:function(t){if(!t||""==t)return uni.showToast({title:"该商户无联系方式或已失效",icon:"none"}),!1;this.merchantEmail=t,this.modalName="Modal"},ToCopy:function(t){uni.showToast({title:"复制成功"});var e=document.createElement("textarea");e.value=t,e.readOnly="readOnly",document.body.appendChild(e),e.select(),e.setSelectionRange(0,t.length);document.execCommand("copy");e.remove()}}};e.default=a},b713:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{class:t.AppStyle},[i("v-uni-view",{staticClass:"header",style:[{height:t.CustomBar+"px"}]},[i("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-back"})],1),i("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t._v("我的订单")]),i("v-uni-view",{staticClass:"action"})],1)],1),i("v-uni-view",{style:[{padding:t.NavBar+"px 10px 0px 10px"}]}),i("v-uni-view",{staticClass:"text-tips margin-top text-center text-gray text-sm"},[t._v("只显示最近60条记录，请及时保存信息")]),0==t.orderList.length?i("v-uni-view",{staticClass:"no-data"},[i("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有数据")],1):t._e(),t._l(t.orderList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"order-box"},[i("v-uni-view",{staticClass:"order-main"},[i("v-uni-view",{staticClass:"order-info"},[i("v-uni-text",{staticClass:"order-id"},[t._v("订单ID："+t._s(e.id)+t._s(e.created))]),e.shopInfo?i("v-uni-text",{staticClass:"order-type bg-blue"},[t._v(t._s(t.getType(e.shopInfo.type)))]):t._e()],1),e.shopInfo?i("v-uni-view",{staticClass:"order-shop",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.shopInfo(e.shopInfo.id)}}},[t._v(t._s(e.shopInfo.title)),i("v-uni-view",{staticClass:"order-time"},[t._v(t._s(t.formatDate(e.created)))])],1):t._e(),e.shopInfo?t._e():i("v-uni-view",{staticClass:"order-shop"},[t._v("[该商品已失效！]"),i("v-uni-view",{staticClass:"order-time"},[t._v(t._s(t.formatDate(e.created)))])],1),e.shopInfo?i("v-uni-view",{staticClass:"order-btn"},[i("v-uni-text",{staticClass:"text-red"},[t._v(t._s(e.shopInfo.price)+" 积分")]),i("v-uni-text",{staticClass:"text-green margin-left",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.toMerchant(e.merchantEmail)}}},[t._v("联系商家")]),i("v-uni-text",{staticClass:"text-blue",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.toInfo(e.shopInfo)}}},[t._v("查看收费内容")])],1):t._e()],1)],1)})),i("v-uni-view",{staticClass:"cu-modal",class:"Modal"==t.modalName?"show":""},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"content"},[t._v("商户联系信息")]),i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),i("v-uni-view",{staticClass:"padding-xl"},[i("v-uni-text",{staticClass:"text-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ToCopy(t.merchantEmail)}}},[t._v(t._s(t.merchantEmail))])],1)],1)],1),0==t.isLoading?i("v-uni-view",{staticClass:"loading"},[i("v-uni-view",{staticClass:"loading-main"},[i("v-uni-image",{attrs:{src:n("14d6")}})],1)],1):t._e()],2)},a=[]},fde6:function(t,e,n){"use strict";n.r(e);var i=n("b713"),a=n("296c");for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n("f0c5"),c=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"6a99a1d0",null,!1,i["a"],void 0);e["default"]=c.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-contents-userinfo"],{"040b":function(t,e,a){"use strict";a.r(e);var i=a("6a51"),n=a("bbde");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);var o=a("f0c5"),c=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"ddbcadda",null,!1,i["a"],void 0);e["default"]=c.exports},2369:function(t,e,a){"use strict";a("7a82");var i=a("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("fc11"));a("99af"),a("e9c4"),a("14d9"),a("ac1f"),a("5319");var s,o=a("625a"),c=i(a("634b")),u={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,contentsList:[],commentsList:[],spaceList:[],userList:[],owo:c.default,owoList:[],type:0,page:1,moreText:"加载更多",isLoad:0,isLoading:0,title:"",uid:0,avatar:"",name:"",customize:"",experience:"",vip:"",isvip:"",introduce:"",userBg:"",fanNum:0,contentsNum:0,commentsNum:0,scrollTop:0,isFollow:0,vid:""}},onPageScroll:function(t){this.scrollTop=t.scrollTop},onShow:function(){if(o.localStorage.getItem("userinfo")){var t=JSON.parse(o.localStorage.getItem("userinfo"));this.vid=t.uid}},onReachBottom:function(){0==this.isLoad&&this.loadMore()},onPullDownRefresh:function(){var t=this.type;this.page=1,this.moreText="加载更多",this.isLoad=0,0==t?this.getContentsList(!1):1==t?this.getCommentsList(!1):this.getSpaceList(!1)},onLoad:function(t){this.title=t.title,this.uid=t.uid,this.avatar=t.avatar,this.getIsFollow(),this.getUserInfo(),this.getUserData();var e=this.owo.data,a=[];for(var i in e)a=a.concat(e[i].container);this.owoList=a,this.getContentsList(!1)},methods:(s={toType:function(t){this.type=t,this.page=1,this.moreText="加载更多",this.isLoad=0,0==t?this.getContentsList(!1):1==t?this.getCommentsList(!1):this.getSpaceList(!1)},goFanList:function(t){uni.navigateTo({url:"/pages/user/fanList?uid="+t})},back:function(){uni.navigateBack({delta:1})},getUserLv:function(t){if(!t)t=0;var e=this.$API.GetRankList();return e[t]},getUserLvStyle:function(t){if(!t)t=0;var e=this.$API.GetRankStyle(),a="color:#fff;background-color: "+e[t];return a},getUserInfo:function(){var t=this;t.$Net.request({url:t.$API.getUserInfo(),data:{key:t.uid},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){1==e.data.code&&(e.data.data.screenName?t.name=e.data.data.screenName:t.name=e.data.data.name,t.local=e.data.data.local,t.vip=e.data.data.vip,t.isvip=e.data.data.isvip,t.experience=e.data.data.experience,t.avatar=e.data.data.avatar,t.customize=e.data.data.customize,t.introduce=e.data.data.introduce,e.data.data.userBg&&(t.userBg=e.data.data.userBg))},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"})}})},loadMore:function(){this.moreText="正在加载中...",this.isLoad=1,0==this.type?this.getContentsList(!0):1==this.type?this.getCommentsList(!0):this.getSpaceList(!0)},reload:function(){0==this.type?this.getContentsList(!1):1==this.type?this.getCommentsList(!1):this.getSpaceList(!1)},getPrivateChat:function(){var t=this,e="";if(!o.localStorage.getItem("userinfo"))return uni.showToast({title:"请先登录",icon:"none"}),uni.navigateTo({url:"/pages/user/login"}),!1;var a=JSON.parse(o.localStorage.getItem("userinfo"));e=a.token;var i=t.uid,n={touid:i,token:e};uni.showLoading({title:"加载中"}),t.$Net.request({url:t.$API.getPrivateChat(),data:n,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(setTimeout((function(){uni.hideLoading()}),1e3),1==e.data.code){var a=t.name,i=t.uid,n=e.data.data;uni.redirectTo({url:"/pages/chat/chat?uid="+i+"&name="+a+"&chatid="+n})}else uni.showToast({title:e.data.msg,icon:"none"})},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"})}})},getUserData:function(){var t=this;t.$Net.request({url:t.$API.getUserData(),data:{uid:t.uid},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){1==e.data.code&&(t.fanNum=e.data.data.fanNum,t.contentsNum=e.data.data.contentsNum,t.commentsNum=e.data.data.commentsNum)},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"})}})},getContentsList:function(t){var e=this,a="";if(o.localStorage.getItem("userinfo")){var i=JSON.parse(o.localStorage.getItem("userinfo"));a=i.token}var n={type:"post",authorId:e.uid},s=e.page;t&&s++,e.$Net.request({url:e.$API.getContentsList(),data:{searchParams:JSON.stringify(e.$API.removeObjectEmptyKey(n)),limit:8,page:s,order:"created",token:a},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(a){if(uni.stopPullDownRefresh(),e.isLoad=0,e.moreText="加载更多",1==a.data.code){var i=a.data.data;i.length>0?t?(e.page++,e.contentsList=e.contentsList.concat(i)):e.contentsList=i:e.moreText="没有更多数据了"}setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)},fail:function(t){uni.stopPullDownRefresh(),e.moreText="加载更多",e.isLoad=0;setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)}})},getCommentsList:function(t){var e=this,a={type:"comment",authorId:e.uid},i=e.page;t&&i++,e.$Net.request({url:e.$API.getCommentsList(),data:{searchParams:JSON.stringify(e.$API.removeObjectEmptyKey(a)),limit:5,page:i,order:"created"},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(a){if(uni.stopPullDownRefresh(),e.isLoad=0,1==a.data.code){var i=a.data.data;if(i.length>0){var n=[];for(var s in i){var o=i[s];o.style="background-image:url("+i[s].avatar+");",n.push(o)}t?(e.page++,e.commentsList=e.commentsList.concat(n)):e.commentsList=n}else e.moreText="没有更多数据了"}setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)},fail:function(t){uni.stopPullDownRefresh(),e.isLoad=0,e.moreText="加载更多";setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)}})},getIsFollow:function(){var t=this,e="";if(o.localStorage.getItem("userinfo")){var a=JSON.parse(o.localStorage.getItem("userinfo"));e=a.token}var i={token:e,touid:t.uid};t.$Net.request({url:t.$API.isFollow(),data:i,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){t.isFollow=e.data.code},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"})}})},follow:function(t){var e=this,a="";if(!o.localStorage.getItem("userinfo"))return uni.showToast({title:"请先登录",icon:"none"}),uni.navigateTo({url:"/pages/user/login"}),!1;var i=JSON.parse(o.localStorage.getItem("userinfo"));a=i.token;var n={token:a,touid:e.uid,type:t};e.isFollow=t,uni.showLoading({title:"加载中"}),e.$Net.request({url:e.$API.follow(),data:n,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:t.data.msg,icon:"none"}),e.getIsFollow()},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"}),e.getIsFollow()}})},commentsAdd:function(t,e,a){var i=this.cid;uni.navigateTo({url:"/pages/contents/commentsadd?cid="+i+"&coid="+e+"&title="+t+"&isreply="+a})},toPost:function(){uni.navigateTo({url:"/pages/user/post"})},toEdit:function(t){if(!o.localStorage.getItem("token")||""==o.localStorage.getItem("token"))return uni.showToast({title:"请先登录哦",icon:"none"}),!1;uni.navigateTo({url:"/pages/user/post?type=edit&cid="+t})}},(0,n.default)(s,"getUserLv",(function(t){var e=this.$API.GetRankList();return e[t]})),(0,n.default)(s,"getUserLvStyle",(function(t){var e=this.$API.GetRankStyle(),a="color:#fff;background-color: "+e[t];return a})),(0,n.default)(s,"toInfo",(function(t){uni.navigateTo({url:"/pages/contents/info?cid="+t.cid+"&title="+t.title})})),(0,n.default)(s,"toInfoComment",(function(t,e){uni.navigateTo({url:"/pages/contents/info?cid="+t+"&title="+e})})),(0,n.default)(s,"toSearch",(function(){uni.redirectTo({url:"/pages/contents/search"})})),(0,n.default)(s,"toEdit",(function(){uni.redirectTo({url:"/pages/user/useredit"})})),(0,n.default)(s,"ToCopy",(function(t){var e=document.createElement("textarea");e.value=t,e.readOnly="readOnly",document.body.appendChild(e),e.select(),e.setSelectionRange(0,t.length),uni.showToast({title:"复制成功"});document.execCommand("copy");e.remove()})),(0,n.default)(s,"formatNumber",(function(t){return t>=1e3&&t<1e4?(t/1e3).toFixed(1)+"k":t>=1e4?(t/1e4).toFixed(1)+"w":t})),(0,n.default)(s,"replaceSpecialChar",(function(t){return!!t&&(t=t.replace(/&quot;/g,'"'),t=t.replace(/&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&nbsp;/g," "),t)})),(0,n.default)(s,"subText",(function(t,e){return t?t.length>e?(t=t.substring(0,e),t+"……"):t:"Ta还没有个人介绍哦"})),(0,n.default)(s,"getSpaceList",(function(t){var e=this,a="";if(o.localStorage.getItem("userinfo")){var i=JSON.parse(o.localStorage.getItem("userinfo"));a=i.token}var n=e.page;t&&n++;var s={uid:e.uid};e.$Net.request({url:e.$API.spaceList(),data:{searchParams:JSON.stringify(e.$API.removeObjectEmptyKey(s)),limit:10,page:n,order:"created",token:a},method:"get",dataType:"json",success:function(a){if(e.changeLoading=1,e.isLoad=0,e.moreText="加载更多",t||(e.dataLoad=!0),1==a.data.code){var i,n=a.data.data;for(var s in n){if(0==n[s].type)if(n[s].pic){var o=n[s].pic;n[s].picList=o.split("||")}else n[s].picList=[];if(2==n[s].type)if(n[s].forwardJson.pic){o=n[s].forwardJson.pic;n[s].forwardJson.picList=o.split("||")}else n[s].forwardJson.picList=[]}i=n,n.length>0?t?(e.page++,e.spaceList=e.spaceList.concat(i)):e.spaceList=i:e.moreText="没有更多动态了"}},fail:function(t){e.changeLoading=1,e.isLoad=0,e.moreText="加载更多";setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)}})})),(0,n.default)(s,"getLv",(function(t){if(!t)t=0;var e=this.$API.getLever(t),a=this.$API.GetLeverList();return a[e]})),(0,n.default)(s,"getLvStyle",(function(t){if(!t)t=0;var e=this.$API.getLever(t),a=this.$API.GetRankStyle(),i="color:#fff;background-color: "+a[e];return i})),s)};e.default=u},"6a51":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"userpost userIndex",class:t.AppStyle},[i("v-uni-view",{staticClass:"header",class:t.scrollTop>40?"goScroll":"",style:[{height:t.CustomBar+"px"}]},[i("v-uni-view",{staticClass:"cu-bar",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-back"})],1),i("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t.scrollTop>40?[t._v(t._s(t.name)+"的主页")]:t._e()],2),t.vid!=t.uid?i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toSearch.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-search"})],1):i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toEdit.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-writefill"})],1)],1)],1),i("v-uni-view",{staticClass:"all-box",staticStyle:{"margin-top":"-10upx"}},[i("v-uni-view",{staticClass:"user-info",style:"padding-top:"+t.NavBar+"px;"},[""==t.userBg?i("v-uni-view",{staticClass:"user-info-bg"},[i("v-uni-image",{attrs:{src:t.avatar,mode:"aspectFill"}})],1):i("v-uni-view",{staticClass:"user-info-bg infoBg-Show"},[i("v-uni-image",{attrs:{src:t.userBg,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"user-info-main"},[i("v-uni-view",{staticClass:"user-info-content"},[i("v-uni-view",{staticClass:"user-info-col"},[i("v-uni-view",{staticClass:"user-header"},[i("v-uni-image",{attrs:{src:t.avatar}})],1),i("v-uni-view",{staticClass:"user-text"},[i("v-uni-text",{staticClass:"user-info-name"},[t.isvip>0?[1==t.vip?[i("v-uni-text",{staticClass:"text-red"},[t._v(t._s(t.name))])]:[i("v-uni-text",{staticClass:"text-yellow"},[t._v(t._s(t.name))])]]:[t._v(t._s(t.name))]],2),i("v-uni-text",{staticClass:"userlv",style:t.getLvStyle(t.experience)},[t._v(t._s(t.getLv(t.experience)))]),t.customize&&""!=t.customize?i("v-uni-text",{staticClass:"userlv customize"},[t._v(t._s(t.customize))]):t._e(),i("v-uni-view",{staticClass:"user-info-data"},[i("v-uni-text",{staticClass:"user-info-data-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goFanList(t.uid)}}},[i("v-uni-text",{staticClass:"user-data-num"},[t._v(t._s(t.fanNum))]),i("v-uni-text",{staticClass:"user-data-label"},[t._v("粉丝")])],1),i("v-uni-text",{staticClass:"user-info-data-box"},[i("v-uni-text",{staticClass:"user-data-num"},[t._v(t._s(t.contentsNum))]),i("v-uni-text",{staticClass:"user-data-label"},[t._v("文章")])],1),i("v-uni-text",{staticClass:"user-info-data-box"},[i("v-uni-text",{staticClass:"user-data-num"},[t._v(t._s(t.commentsNum))]),i("v-uni-text",{staticClass:"user-data-label"},[t._v("评论")])],1)],1)],1)],1),i("v-uni-view",{staticClass:"user-introduce"},[i("v-uni-text",{staticClass:"cuIcon-text"}),""!=t.introduce&&t.introduce?[t._v(t._s(t.subText(t.introduce,60)))]:[t._v("Ta还没有个人介绍哦")]],2)],1)],1)],1),i("v-uni-view",{staticClass:"search-type grid col-4"},[i("v-uni-view",{staticClass:"search-type-box",class:0==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toType(0)}}},[i("v-uni-text",[t._v("文章")])],1),i("v-uni-view",{staticClass:"search-type-box",class:2==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toType(2)}}},[i("v-uni-text",[t._v("动态")])],1),i("v-uni-view",{staticClass:"search-type-box",class:1==t.type?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toType(1)}}},[i("v-uni-text",[t._v("评论")])],1)],1),0==t.type?i("v-uni-view",{staticClass:"cu-card article no-card"},[t._l(t.contentsList,(function(e,a){return 0==t.type?[i("articleItem",{key:a+"_0",attrs:{item:e}})]:t._e()})),t.contentsList.length>0?i("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[i("v-uni-text",[t._v(t._s(t.moreText))])],1):t._e(),0==t.contentsList.length?i("v-uni-view",{staticClass:"no-data"},[i("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有数据")],1):t._e()],2):t._e(),2==t.type?i("v-uni-view",{staticClass:"search-space"},[0==t.spaceList.length?i("v-uni-view",{staticClass:"no-data"},[i("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有动态")],1):t._e(),i("spaceItem",{attrs:{spaceList:t.spaceList}}),t.spaceList.length>0?i("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[i("v-uni-text",[t._v(t._s(t.moreText))])],1):t._e()],1):t._e(),1==t.type?i("v-uni-view",{staticClass:"cu-list menu-avatar"},[0==t.commentsList.length?i("v-uni-view",{staticClass:"no-data"},[i("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有评论")],1):t._e(),i("v-uni-view",{staticClass:"cu-card dynamic no-card",staticStyle:{"margin-top":"20upx"}},[t._l(t.commentsList,(function(e,a){return t.commentsList.length>0?[i("commentItem",{key:a+"_0",attrs:{item:e,isHead:!1}})]:t._e()}))],2),t.commentsList.length>0?i("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[i("v-uni-text",[t._v(t._s(t.moreText))])],1):t._e()],1):t._e(),i("v-uni-view",{staticStyle:{width:"100%",height:"100upx","background-color":"#f6f6f6"}})],1),t.vid!=t.uid?i("v-uni-view",{staticClass:"userInfo-bottom-btn"},[i("v-uni-view",{staticClass:"userInfo-bottom-main grid col-2"},[i("v-uni-view",{staticClass:"userInfo-bottom-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getPrivateChat()}}},[i("v-uni-view",{staticClass:"userInfo-tochat"},[i("v-uni-text",{staticClass:"cuIcon-mark"}),t._v("私聊")],1)],1),i("v-uni-view",{staticClass:"userInfo-bottom-box"},[1==t.isFollow?i("v-uni-button",{staticClass:"cu-btn bg-gradual-red",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.follow(0)}}},[i("v-uni-text",{staticClass:"cuIcon-check"}),t._v("已关注")],1):i("v-uni-button",{staticClass:"cu-btn bg-gradual-red",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.follow(1)}}},[i("v-uni-text",{staticClass:"cuIcon-add"}),t._v("关注Ta")],1)],1)],1)],1):t._e(),0==t.isLoading?i("v-uni-view",{staticClass:"loading"},[i("v-uni-view",{staticClass:"loading-main"},[i("v-uni-image",{attrs:{src:a("14d6")}})],1)],1):t._e()],1)},n=[]},bbde:function(t,e,a){"use strict";a.r(e);var i=a("2369"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a}}]);
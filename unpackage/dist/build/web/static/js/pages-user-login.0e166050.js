(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-login"],{"5dcf":function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("e9c4");var i=n("625a"),o={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,userName:"",password:""}},onPullDownRefresh:function(){},onShow:function(){},onLoad:function(){},methods:{back:function(){uni.navigateBack({delta:1})},getCID:function(){},setClientId:function(e){var t="";if(!i.localStorage.getItem("token"))return!1;t=i.localStorage.getItem("token"),this.$Net.request({url:this.$API.setClientId(),data:{clientId:e,token:t},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){e.data.code},fail:function(e){uni.showToast({title:"网络开小差了哦",icon:"none"})}})},login:function(){var e=this;if(""==this.password||""==this.userName)return uni.showToast({title:"请输入正确的参数",icon:"none",duration:1e3,position:"bottom"}),!1;var t={name:this.userName,password:this.password};uni.showLoading({title:"加载中"}),e.$Net.request({url:e.$API.userLogin(),data:{params:JSON.stringify(e.$API.removeObjectEmptyKey(t))},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"post",dataType:"json",success:function(t){if(setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:t.data.msg,icon:"none"}),1==t.data.code){i.localStorage.setItem("userinfo",JSON.stringify(t.data.data)),i.localStorage.setItem("token",t.data.data.token),e.getCID();setTimeout((function(){uni.redirectTo({url:"/pages/home/index"}),clearTimeout("timer")}),1e3)}},fail:function(e){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"}),uni.stopPullDownRefresh()}})},toRegister:function(){uni.navigateTo({url:"/pages/user/register"})},toFoget:function(){uni.navigateTo({url:"/pages/user/foget"})},toQQlogin:function(){var e=this;uni.login({provider:"qq",success:function(t){t.code;uni.getUserInfo({provider:"qq",success:function(t){var n={nickName:t.userInfo.nickname,appLoginType:"qq",headImgUrl:t.userInfo.figureurl_qq_2};uni.showLoading({title:"加载中"}),e.$Net.request({url:e.$API.userApi(),data:{params:JSON.stringify(e.$API.removeObjectEmptyKey(n))},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(console.log(e),setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:e.data.msg,icon:"none"}),1==e.data.code){i.localStorage.setItem("userinfo",JSON.stringify(e.data.data)),i.localStorage.setItem("token",e.data.data.token);setTimeout((function(){uni.redirectTo({url:"/pages/home/index"}),clearTimeout("timer")}),1e3)}},fail:function(e){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"}),uni.stopPullDownRefresh()}})}})},fail:function(e){uni.showToast({title:"请求出错啦！",icon:"none",duration:3e3}),setTimeout((function(){uni.hideLoading()}),1e3)}})},toWexinlogin:function(){var e=this;uni.login({provider:"weixin",success:function(t){t.code;uni.getUserInfo({provider:"weixin",success:function(t){var n={nickName:t.userInfo.nickName,appLoginType:"weixin",headImgUrl:t.userInfo.avatarUrl};uni.showLoading({title:"加载中"}),e.$Net.request({url:e.$API.userApi(),data:{params:JSON.stringify(e.$API.removeObjectEmptyKey(n))},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:e.data.msg,icon:"none"}),1==e.data.code){i.localStorage.setItem("userinfo",JSON.stringify(e.data.data)),i.localStorage.setItem("token",e.data.data.token);setTimeout((function(){uni.redirectTo({url:"/pages/home/index"}),clearTimeout("timer")}),1e3)}},fail:function(e){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"}),uni.stopPullDownRefresh()}})}})},fail:function(e){console.log(e),uni.showToast({title:"请求出错啦！",icon:"none",duration:3e3}),setTimeout((function(){uni.hideLoading()}),1e3)}})},toWeibologin:function(){var e=this;uni.login({provider:"sinaweibo",success:function(t){var n;n=t.authResult.access_token,uni.getUserInfo({provider:"sinaweibo",success:function(t){var o={nickName:t.userInfo.nickname,headImgUrl:t.userInfo.avatar_large,openId:t.userInfo.id,accessToken:n,appLoginType:"SINAWEIBO"};uni.showLoading({title:"加载中"}),e.$Net.request({url:e.$API.userApi(),data:{params:JSON.stringify(e.$API.removeObjectEmptyKey(o))},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:e.data.msg,icon:"none"}),1==e.data.code){i.localStorage.setItem("userinfo",JSON.stringify(e.data.data)),i.localStorage.setItem("token",e.data.data.token);setTimeout((function(){uni.redirectTo({url:"/pages/home/index"}),clearTimeout("timer")}),1e3)}},fail:function(e){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"}),uni.stopPullDownRefresh()}})}})},fail:function(e){uni.showToast({title:"请求出错啦！",icon:"none",duration:3e3}),setTimeout((function(){uni.hideLoading()}),1e3)}})}}};t.default=o},"606f":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"user",class:e.AppStyle},[n("v-uni-view",{staticClass:"header",style:[{height:e.CustomBar+"px"}]},[n("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:e.CustomBar+"px","padding-top":e.StatusBar+"px"}},[n("v-uni-view",{staticClass:"action",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.back.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"cuIcon-back"})],1),n("v-uni-view",{staticClass:"content text-bold",style:[{top:e.StatusBar+"px"}]},[e._v("用户登录")]),n("v-uni-view",{staticClass:"action",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toRegister.apply(void 0,arguments)}}},[n("v-uni-text",[e._v("注册")])],1)],1)],1),n("v-uni-view",{style:[{padding:e.NavBar+"px 10px 0px 10px"}]}),n("v-uni-view",{staticClass:"user-form"},[n("v-uni-form",[n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-input",{attrs:{name:"input",placeholder:"用户名"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-input",{attrs:{name:"input",placeholder:"用户密码",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-uni-view",{staticClass:"user-btn flex flex-direction"},[n("v-uni-button",{staticClass:"cu-btn bg-blue margin-tb-sm lg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.login.apply(void 0,arguments)}}},[e._v("立即登录")])],1)],1)],1),n("v-uni-view",{staticClass:"user-foget"},[n("v-uni-text",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toFoget.apply(void 0,arguments)}}},[e._v("忘记密码？")])],1)],1)},o=[]},"771d":function(e,t,n){"use strict";n.r(t);var i=n("5dcf"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},"8de2":function(e,t,n){"use strict";n.r(t);var i=n("606f"),o=n("771d");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);var s=n("f0c5"),u=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"0585c036",null,!1,i["a"],void 0);t["default"]=u.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-assets"],{"1bf8":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"user"},[a("v-uni-view",{staticClass:"header",class:t.AppStyle,style:[{height:t.CustomBar+"px"}]},[a("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-back"})],1),a("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t._v("我的账户")]),a("v-uni-view",{staticClass:"action"})],1)],1),a("v-uni-view",{style:[{padding:t.NavBar+"px 10px 0px 10px"}]}),a("v-uni-view",{staticClass:"data-box"},[a("v-uni-view",{staticClass:"myAssets"},[a("v-uni-text",{staticClass:"text-red myAssets-num"},[t._v(t._s(t.assets))]),t._v(t._s(t.currencyName))],1),a("v-uni-view",{staticClass:"myAssets-btn"},[a("v-uni-text",{staticClass:"cu-btn bg-blue radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.userrecharge.apply(void 0,arguments)}}},[t._v("充值")]),a("v-uni-text",{staticClass:"cu-btn bg-red radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.userwithdraw.apply(void 0,arguments)}}},[t._v("提现")]),""==t.adpid&&t.adpid?t._e():a("v-uni-text",{staticClass:"cu-btn bg-yellow radius cuIcon-videofill",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.show.apply(void 0,arguments)}}},[t._v("获取")])],1),1==t.isvip?a("v-uni-view",{staticClass:"vip-maim"},[a("v-uni-view",{staticClass:"bg-gradual-red text-center shadow-blur"},[a("v-uni-view",{staticClass:"text-lg text-bold"},[t._v("欢迎您，尊贵的VIP用户")]),a("v-uni-view",{staticClass:"margin-top-sm text-Abc"},[t._v("正在享受全站商品"+t._s(t.tovipDiscount(t.vipDiscount))+"折优惠，及VIP专属头衔！")]),1==t.vip?a("v-uni-view",{staticClass:"margin-top-sm text-Abc"},[t._v("到期时间：永久")]):a("v-uni-view",{staticClass:"margin-top-sm text-Abc"},[t._v("到期时间："+t._s(t.formatDate(t.vip)))]),a("v-uni-view",{staticClass:"cu-btn radius margin-top bg-black  shadow-blur",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.buyvip.apply(void 0,arguments)}}},[t._v("立即续期")])],1)],1):a("v-uni-view",{staticClass:"vip-maim"},[a("v-uni-view",{staticClass:"bg-gradual-blue text-center shadow-blur"},[a("v-uni-view",{staticClass:"text-lg text-bold"},[t._v("您当前不是VIP用户")]),a("v-uni-view",{staticClass:"margin-top-sm text-Abc"},[t._v("开通VIP，可享受全站商品"+t._s(t.tovipDiscount(t.vipDiscount))+"折优惠"),a("v-uni-text",{staticClass:"cuIcon-question",attrs:{"data-target":"DialogModal1"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showModal.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"cu-btn radius margin-top bg-black  shadow-blur",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.buyvip.apply(void 0,arguments)}}},[t._v("立即开通")])],1)],1)],1),a("v-uni-view",{staticClass:"text-tips margin-top text-center text-gray text-sm"},[t._v("只显示最近30条资产记录")]),0==t.orderList.length?a("v-uni-view",{staticClass:"no-data"},[a("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有数据")],1):t._e(),t._l(t.orderList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"order-box"},[a("v-uni-view",{staticClass:"order-main"},[a("v-uni-view",{staticClass:"order-info"},[a("v-uni-text",{staticClass:"order-id"},[t._v("订单ID："+t._s(e.outTradeNo))]),e.shopInfo?a("v-uni-text",{staticClass:"order-type bg-blue"},[t._v(t._s(t.getType(e.shopInfo.type)))]):t._e()],1),a("v-uni-view",{staticClass:"order-shop"},[t._v(t._s(e.subject)),a("v-uni-view",{staticClass:"order-time"},[t._v(t._s(t.formatDate(e.created)))])],1),a("v-uni-view",{staticClass:"order-btn"},[a("v-uni-text",{staticClass:"text-red"},[t._v(t._s(e.totalAmount)+t._s(t.currencyName))]),0==e.status?a("v-uni-text",{staticClass:"text-yellow pay-status"},[t._v("未支付")]):t._e(),1==e.status?a("v-uni-text",{staticClass:"text-green pay-status"},[t._v("已支付")]):t._e()],1)],1)],1)})),0==t.isLoading?a("v-uni-view",{staticClass:"loading"},[a("v-uni-view",{staticClass:"loading-main"},[a("v-uni-image",{attrs:{src:i("14d6")}})],1)],1):t._e(),a("v-uni-view",{staticClass:"cu-modal",class:"DialogModal1"==t.modalName?"show":""},[a("v-uni-view",{staticClass:"cu-dialog"},[a("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[a("v-uni-view",{staticClass:"content"},[t._v("VIP开通说明")]),a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),a("v-uni-view",{staticClass:"padding-xl text-left"},[a("v-uni-view",[t._v("开通VIP后，在有效期结束之前，您将享受全站所有商品（无论类型）的对应折扣优惠。但因为商品采用积分结算，而积分仅能为整数，所以在进行折扣计算时，将默认已整数结果进行计算。所以，对于VIP用户，小于或等于1积分的商品，将视为免费。价格大于1的商品，将省略小数点后部分。")])],1)],1)],1)],2)},n=[]},4497:function(t,e,i){"use strict";i.r(e);var a=i("1bf8"),n=i("ecb7");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);var o=i("f0c5"),u=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"e2c54e2c",null,!1,a["a"],void 0);e["default"]=u.exports},aefd:function(t,e,i){"use strict";i("7a82");var a=i("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("e25e"),i("fb6a"),i("a9e3"),i("d401"),i("d3b7"),i("25f0"),i("ac1f"),i("5319"),i("c975"),i("e9c4");var n=a(i("74ee")),s=i("625a"),o=[-5001,-5002,-5003,-5004,-5005,-5006],u={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,userInfo:null,token:"",assets:"",isvip:0,vip:0,orderList:[],isLoading:0,modalName:null,vipDiscount:0,vipPrice:0,scale:0,currencyName:"",title:"激励视频广告",loading:!1,loadError:!1,adpid:"",adsLogid:""}},onPullDownRefresh:function(){s.localStorage.getItem("token")&&(this.token=s.localStorage.getItem("token"),this.userStatus(),this.getOrderList()),this.getVipInfo();setTimeout((function(){uni.stopPullDownRefresh()}),1e3)},onReady:function(){},onShow:function(){this.currencyName=this.$API.getCurrencyName(),s.localStorage.getItem("userinfo")&&(this.userInfo=JSON.parse(s.localStorage.getItem("userinfo")),this.userInfo.style="background-image:url("+this.userInfo.avatar+");"),s.localStorage.getItem("token")&&(this.token=s.localStorage.getItem("token"),this.userStatus(),this.getOrderList()),this.getVipInfo()},onLoad:function(){},methods:{back:function(){uni.navigateBack({delta:1})},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=null},toLink:function(t){if(!s.localStorage.getItem("token")||""==s.localStorage.getItem("token"))return uni.showToast({title:"请先登录哦",icon:"none"}),!1;uni.navigateTo({url:t})},userrecharge:function(){uni.navigateTo({url:"/pages/user/userrecharge"})},userwithdraw:function(){uni.navigateTo({url:"/pages/user/userwithdraw"})},buyvip:function(){uni.navigateTo({url:"/pages/user/buyvip"})},userStatus:function(){var t=this;t.$Net.request({url:t.$API.userStatus(),data:{token:t.token},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){1==e.data.code&&(t.assets=e.data.data.assets,t.vip=e.data.data.vip,t.isvip=e.data.data.isvip)},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"})}})},getOrderList:function(){var t=this,e={token:t.token};t.$Net.request({url:t.$API.payLogList(),data:e,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(uni.stopPullDownRefresh(),1==e.data.code){var i=e.data.data;i.length>0&&(t.orderList=i)}setTimeout((function(){t.isLoading=1,clearTimeout("timer")}),300)},fail:function(e){uni.stopPullDownRefresh(),uni.showToast({title:"网络开小差了哦",icon:"none"});setTimeout((function(){t.isLoading=1,clearTimeout("timer")}),300)}})},formatDate:function(t){t=new Date(parseInt(1e3*t));var e=t.getFullYear(),i=("0"+(t.getMonth()+1)).slice(-2),a=("0"+t.getDate()).slice(-2),n=("0"+t.getHours()).slice(-2),s=("0"+t.getMinutes()).slice(-2),o=e+"-"+i+"-"+a+" "+n+":"+s;return o},getVipInfo:function(){var t=this;t.$Net.request({url:t.$API.getVipInfo(),header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){1==e.data.code&&(t.vipDiscount=e.data.data.vipDiscount,t.vipPrice=e.data.data.vipPrice,t.scale=e.data.data.scale);setTimeout((function(){t.isLoading=1,clearTimeout("timer")}),300)},fail:function(e){setTimeout((function(){t.isLoading=1,clearTimeout("timer")}),300)}})},tovipDiscount:function(t){return Number(t)<=0?0:(t=t.toString(),t=t.replace("0.",""),t)},createAd:function(){var t=this,e=this,i=this.rewardedVideoAd=uni.createRewardedVideoAd(this.adOption);i.onLoad((function(){t.loading=!1,t.loadError=!1,console.log("onLoad event")})),i.onClose((function(i){t.loading=!0,i&&i.isEnded?(console.log("onClose "+i.isEnded),console.log("开始广告"),e.adsGiftNotify()):(console.log("onClose "+i.isEnded),setTimeout((function(){uni.showToast({title:"您未完成广告播放，无法获得奖励！",duration:1e4,position:"bottom"})}),500)),uni.hideLoading()})),i.onError((function(e){uni.hideLoading(),t.loading=!1,e.code&&-1!==o.indexOf(e.code)&&(t.loadError=!0),console.log("onError event",e),uni.showToast({title:e.errMsg,duration:1e4,position:"bottom"})})),this.loading=!0},show:function(){var t=this;uni.showLoading(),t.$Net.request({url:t.$API.adsGift(),data:{token:t.token,appkey:t.$API.getAppKey()},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(console.log(JSON.stringify(e)),uni.hideLoading(),1==e.data.code){t.adsLogid=e.data.data.logid;var i=t.rewardedVideoAd;i.show().catch((function(){i.load().then((function(){return i.show()})).catch((function(t){console.log("激励视频 广告显示失败",t),uni.showToast({title:t.errMsg||t.message,duration:5e3,position:"bottom"})}))}))}},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"})}})},adsGiftNotify:function(){var t=this;t.$Net.request({url:t.$API.adsGiftNotify(),data:{token:t.token,logid:t.adsLogid},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){console.log(JSON.stringify(e)),1==e.data.code&&uni.showToast({title:"已获得"+e.data.data.award+t.currencyName+"奖励",duration:3e3,position:"bottom"})},fail:function(t){uni.showToast({title:"网络开小差了哦",icon:"none"})}})},reloadAd:function(){this.loading=!0,this.rewardedVideoAd.load()}},components:{waves:n.default}};e.default=u},ecb7:function(t,e,i){"use strict";i.r(e);var a=i("aefd"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-userrecharge"],{"0e20":function(t,e,a){var n=a("cf61");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("6fc3a9b5",n,!0,{sourceMap:!1,shadowMode:!1})},"19b8":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"user",class:t.AppStyle},[a("v-uni-view",{staticClass:"header",style:[{height:t.CustomBar+"px"}]},[a("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-back"})],1),a("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t._v("在线充值")]),a("v-uni-view",{staticClass:"action"})],1)],1),a("v-uni-view",{style:[{padding:t.NavBar+"px 10px 0px 10px"}]}),a("v-uni-view",{staticClass:"data-box userrecharge"},[a("v-uni-view",{staticClass:"userrecharge-type"},[a("v-uni-text",{staticClass:"cu-btn text-blue radius",class:"0"==t.payType?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toPayType(0)}}},[t._v("支付宝")]),a("v-uni-text",{staticClass:"cu-btn text-blue radius",class:"1"==t.payType?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toPayType(1)}}},[t._v("微信支付")]),a("v-uni-text",{staticClass:"cu-btn text-blue radius",class:"2"==t.payType?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toPayType(2)}}},[t._v("卡密充值")]),a("v-uni-text",{staticClass:"cu-btn text-blue radius",class:"3"==t.payType?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toPayType(3)}}},[t._v("易支付")])],1),1==t.payType||0==t.payType?[0==t.isToPay?[a("v-uni-view",{staticClass:"userrecharge-form"},[a("v-uni-input",{attrs:{placeholder:"请输入充值金额(￥),最低5元",type:"number",name:"input"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),a("v-uni-button",{staticClass:"cu-btn bg-yellow radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pay.apply(void 0,arguments)}}},[t._v("确定充值")])],1)]:t._e(),1==t.isToPay?[a("v-uni-view",{staticClass:"userrecharge-code"},[a("v-uni-image",{attrs:{src:t.codeImg}})],1),a("v-uni-view",{staticClass:"userrecharge-btn"},[a("v-uni-text",{staticClass:"cu-btn bg-cyan radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.dtImg.apply(void 0,arguments)}}},[t._v("保存二维码")]),"0"==t.payType?a("v-uni-text",{staticClass:"cu-btn bg-yellow radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toAlipay()}}},[t._v("打开支付宝")]):t._e(),"1"==t.payType?a("v-uni-text",{staticClass:"cu-btn bg-yellow radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toWxpay()}}},[t._v("打开微信")]):t._e()],1)]:t._e()]:t._e(),2==t.payType?[0==t.isToPay?[a("v-uni-view",{staticClass:"userrecharge-form"},[a("v-uni-input",{attrs:{placeholder:"请填入充值码",name:"input",type:"text"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),a("v-uni-button",{staticClass:"cu-btn bg-yellow radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tokenPay.apply(void 0,arguments)}}},[t._v("确定充值")])],1)]:t._e()]:t._e(),3==t.payType?[a("v-uni-view",{staticClass:"userrecharge-form toEpay"},[a("v-uni-view",{staticClass:"toEpayType"},[a("v-uni-view",{staticClass:"toEpayType-cur",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toEpayType=!t.toEpayType}}},[t._v(t._s(t.getTypeText(t.ePayType))),a("v-uni-text",{staticClass:"cuIcon-triangledownfill"})],1),t.toEpayType?a("v-uni-view",{staticClass:"toEpayType-main"},[a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setEPayType("alipay")}}},[t._v("支付宝")]),a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setEPayType("wxpay")}}},[t._v("微信")]),a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setEPayType("qqpay")}}},[t._v("QQ红包")])],1):t._e()],1),a("v-uni-input",{attrs:{placeholder:"请输入充值金额(￥),最低5元",name:"input",type:"text"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),a("v-uni-button",{staticClass:"cu-btn bg-yellow radius",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toEpay()}}},[t._v("确定充值")])],1)]:t._e(),1==t.payType||0==t.payType?a("v-uni-view",{staticClass:"userrecharge-intro"},[a("v-uni-view",{staticClass:"userrecharge-intro-title"},[t._v("充值注意：")]),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("1.如果支付软件未成功开启，可尝试保存二维码再进行扫码支付，部分设备可能无权限打开支付宝或微信。")]),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("2.充值金额与网站积分的比例为"),a("v-uni-text",{staticClass:"text-red text-bold"},[t._v("1:"+t._s(t.scale))]),t._v("，最低充值金额"),a("v-uni-text",{staticClass:"text-red text-bold"},[t._v("5")]),t._v("元。")],1),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("3.如果充值金额未到账，请查看账户中的充值记录，并立即反馈。")]),1==t.payType?a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("4.微信"),a("v-uni-text",{staticClass:"text-red text-bold"},[t._v("不支持从相册识别二维码支付")]),t._v("，如选择保存二维码支付，请将二维码上传到其它设备，再进行正常扫码支付。")],1):t._e()],1):t._e(),2==t.payType?a("v-uni-view",{staticClass:"userrecharge-intro"},[a("v-uni-view",{staticClass:"userrecharge-intro-title"},[t._v("充值注意：")]),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("1.请填写正确的充值码，注意空格与特殊符号。")]),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("2.充值金额与网站积分的比例为"),a("v-uni-text",{staticClass:"text-red text-bold"},[t._v("1:"+t._s(t.scale))]),t._v("。")],1),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("3.充值码在进行充值操作后，将失效。")])],1):t._e(),3==t.payType?a("v-uni-view",{staticClass:"userrecharge-intro"},[a("v-uni-view",{staticClass:"userrecharge-intro-title"},[t._v("充值注意：")]),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("1.易支付可选择三种交易平台，分别为支付宝，微信，QQ钱包。")]),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("2.充值金额与网站积分的比例为"),a("v-uni-text",{staticClass:"text-red text-bold"},[t._v("1:"+t._s(t.scale))]),t._v("，最低充值金额"),a("v-uni-text",{staticClass:"text-red text-bold"},[t._v("5")]),t._v("元。")],1),a("v-uni-view",{staticClass:"userrecharge-intro-text"},[t._v("3.如果充值金额未到账，请查看账户中的充值记录，并立即反馈。")])],1):t._e()],2),a("v-uni-view",{staticClass:"cu-modal",class:"Epay"==t.modalName?"show":""},[a("v-uni-view",{staticClass:"cu-dialog"},[a("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[a("v-uni-view",{staticClass:"content"},[t._v("易支付确认")]),a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"text-red"},[t._v("关闭")])],1)],1),a("v-uni-view",{staticClass:"padding-xl"},[a("v-uni-image",{attrs:{src:t.ePayCodeImg}}),a("v-uni-text",[t._v("如无法跳转，可点击复制链接后，前往浏览器打开。")])],1),a("v-uni-view",{staticClass:"text-center padding-xl"},[a("v-uni-button",{staticClass:"cu-btn line-blue text-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ToCopy(t.ePayUrl)}}},[t._v("复制链接")]),a("v-uni-button",{staticClass:"cu-btn bg-blue margin-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goPayUrl(t.ePayUrl)}}},[t._v("立即跳转")])],1)],1)],1)],1)},i=[]},"24f6":function(t,e,a){"use strict";var n=a("0e20"),i=a.n(n);i.a},"2cf2":function(t,e,a){"use strict";a.r(e);var n=a("19b8"),i=a("a0c0");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("24f6");var s=a("f0c5"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"5b30888f",null,!1,n["a"],void 0);e["default"]=u.exports},"8f22":function(t,e,a){"use strict";a("7a82");var n=a("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("ac1f"),a("00b4"),a("e9c4"),a("5319");var i=n(a("74ee")),o=a("625a"),s={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,userInfo:null,token:"",payType:0,isToPay:0,num:"",ePayType:"alipay",toEpayType:!1,codeImg:"",alipayUrl:"",wxpayUrl:"",ePayUrl:"",ePayCodeImg:"",vipDiscount:0,vipPrice:0,scale:0,modalName:null}},onPullDownRefresh:function(){},onShow:function(){o.localStorage.getItem("userinfo")&&(this.userInfo=JSON.parse(o.localStorage.getItem("userinfo")),this.userInfo.style="background-image:url("+this.userInfo.avatar+");"),o.localStorage.getItem("token")&&(this.token=o.localStorage.getItem("token")),this.getVipInfo()},onLoad:function(){},methods:{back:function(){uni.navigateBack({delta:1})},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=null},toPayType:function(t){this.payType=t,this.num="",this.isToPay=0,this.codeImg=""},isPositiveInteger:function(t){return/^[0-9]+$/.test(t)},pay:function(){var t=this;return t.isPositiveInteger(t.num)&&""!=t.num?t.num<1?(uni.showToast({title:"最低充值金额5元",icon:"none"}),!1):void uni.showModal({title:"确定要充值该金额吗？",success:function(e){e.confirm?(0==t.payType&&t.aliPay(),1==t.payType&&t.wxPay()):e.cancel&&console.log("用户点击取消")}}):(uni.showToast({title:"充值金额只能为正整数",icon:"none"}),!1)},aliPay:function(){var t=this,e="";if(o.localStorage.getItem("userinfo")){var a=JSON.parse(o.localStorage.getItem("userinfo"));e=a.token}var n={num:t.num,token:e};uni.showLoading({title:"加载中"}),t.$Net.request({url:t.$API.scancodePay(),data:n,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(setTimeout((function(){uni.hideLoading()}),1e3),1==e.data.code){var a=e.data.data;t.alipayUrl="alipays://platformapi/startapp?appId=20000067&url="+encodeURI(a),t.codeImg=t.$API.qrCode()+"?codeContent="+a,t.isToPay=1,t.toAlipay()}else uni.showToast({title:"支付接口异常",icon:"none"})},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"})}})},wxPay:function(){var t=this,e="";if(o.localStorage.getItem("userinfo")){var a=JSON.parse(o.localStorage.getItem("userinfo"));e=a.token}var n={price:t.num,token:e};uni.showLoading({title:"加载中"}),t.$Net.request({url:t.$API.wxPay(),data:n,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(console.log(JSON.stringify(e)),setTimeout((function(){uni.hideLoading()}),1e3),1==e.data.code){var a=e.data.data.data;t.wxpayUrl=a,t.codeImg=t.$API.qrCode()+"?codeContent="+a,t.isToPay=1,t.toWxpay()}else uni.showToast({title:"支付接口异常",icon:"none"})},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"})}})},tokenPay:function(){var t=this,e="";if(o.localStorage.getItem("userinfo")){var a=JSON.parse(o.localStorage.getItem("userinfo"));e=a.token}if(""==t.num)return uni.showToast({title:"请输入充值码！",icon:"none"}),!1;var n={key:t.num,token:e};uni.showLoading({title:"加载中"}),t.$Net.request({url:t.$API.tokenPay(),data:n,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:e.data.msg,icon:"none"}),1==e.data.code)setTimeout((function(){t.back(),clearTimeout("timer")}),1e3)},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"})}})},toAlipay:function(){var t=this.alipayUrl;window.open(t)},toWxpay:function(){var t=this.wxpayUrl;window.open(t)},dtImg:function(){this.codeImg;uni.showToast({title:"请长按二维码图片保存",icon:"none"})},getVipInfo:function(){var t=this;t.$Net.request({url:t.$API.getVipInfo(),header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){1==e.data.code&&(t.vipDiscount=e.data.data.vipDiscount,t.vipPrice=e.data.data.vipPrice,t.scale=e.data.data.scale);setTimeout((function(){t.isLoading=1,clearTimeout("timer")}),300)},fail:function(e){setTimeout((function(){t.isLoading=1,clearTimeout("timer")}),300)}})},toEpay:function(){var t=this,e=t.ePayType,a="";if(o.localStorage.getItem("userinfo")){var n=JSON.parse(o.localStorage.getItem("userinfo"));a=n.token}if(!t.isPositiveInteger(t.num)||""==t.num)return uni.showToast({title:"充值金额只能为正整数",icon:"none"}),!1;if(t.num<5)return uni.showToast({title:"最低充值金额5元",icon:"none"}),!1;var i={money:t.num,device:"mobile",type:e,token:a};uni.showLoading({title:"加载中"}),t.$Net.request({url:t.$API.EPay(),data:i,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(e){if(setTimeout((function(){uni.hideLoading()}),1e3),1==e.data.code){var a=e.data.payapi,n="";if(e.data.data.payurl){n=e.data.data.payurl;var i=n.substring(0,2);"./"==i&&(n=n.replace("./",""),n=a+n)}e.data.data.qrcode&&(n=e.data.data.qrcode),t.ePayCodeImg=t.$API.qrCode()+"?codeContent="+n,t.ePayUrl=n,t.modalName="Epay"}else uni.showToast({title:e.data.msg,icon:"none"})},fail:function(t){setTimeout((function(){uni.hideLoading()}),1e3),uni.showToast({title:"网络开小差了哦",icon:"none"})}})},setEPayType:function(t){this.ePayType=t,this.toEpayType=!1},getTypeText:function(t){return"alipay"==t?"支付宝":"wxpay"==t?"微信支付":"qqpay"==t?"QQ钱包":void 0},goPayUrl:function(t){window.open(t)},ToCopy:function(t){var e=document.createElement("textarea");e.value=t,e.readOnly="readOnly",document.body.appendChild(e),e.select(),e.setSelectionRange(0,t.length),uni.showToast({title:"复制成功"});document.execCommand("copy");e.remove()}},components:{waves:i.default}};e.default=s},a0c0:function(t,e,a){"use strict";a.r(e);var n=a("8f22"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},cf61:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-5b30888f]{background-color:#fff}body.?%PAGE?%[data-v-5b30888f]{background-color:#fff}",""]),t.exports=e}}]);
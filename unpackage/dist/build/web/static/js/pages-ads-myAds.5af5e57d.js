(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ads-myAds"],{"3ee7":function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return i})),s.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-uni-view",{staticClass:"user",class:t.AppStyle},[s("v-uni-view",{staticClass:"header",style:[{height:t.CustomBar+"px"}]},[s("v-uni-view",{staticClass:"cu-bar bg-white",style:{height:t.CustomBar+"px","padding-top":t.StatusBar+"px"}},[s("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[s("v-uni-text",{staticClass:"cuIcon-back"})],1),s("v-uni-view",{staticClass:"content text-bold",style:[{top:t.StatusBar+"px"}]},[t._v("我的广告")])],1)],1),s("v-uni-view",{style:[{padding:t.NavBar+"px 10px 0px 10px"}]}),s("v-uni-view",{staticClass:"data-box"},[s("v-uni-view",{staticClass:"search-type grid col-3"},[s("v-uni-view",{staticClass:"search-type-box",class:1==t.status?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setStatus(1)}}},[s("v-uni-text",[t._v("已发布")])],1),s("v-uni-view",{staticClass:"search-type-box",class:0==t.status?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setStatus(0)}}},[s("v-uni-text",[t._v("待审核")])],1),s("v-uni-view",{staticClass:"search-type-box",class:2==t.status?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setStatus(2)}}},[s("v-uni-text",[t._v("已到期")])],1)],1),s("v-uni-view",{staticClass:"myAds"},[0==t.adsList.length?s("v-uni-view",{staticClass:"no-data"},[s("v-uni-text",{staticClass:"cuIcon-text"}),t._v("暂时没有数据")],1):t._e(),t._l(t.adsList,(function(e,a){return s("v-uni-view",{key:a,staticClass:"myAds-box",on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.goEdit(e)}}},[s("v-uni-view",{staticClass:"myAds-title"},[t._v(t._s(e.name))]),s("v-uni-view",{staticClass:"myAds-time"},[t._v("预计到期时间："),s("v-uni-text",{staticClass:"text-blue"},[t._v(t._s(t.formatDate(e.close)))]),s("v-uni-text",{staticClass:"text-green"},[t._v(t._s(t.getType(e.type)))])],1),s("v-uni-view",{staticClass:"myAds-concent"},[s("v-uni-view",{staticClass:"myAds-pic"},[s("v-uni-image",{attrs:{src:e.img,mode:"aspectFill"}})],1),s("v-uni-view",{staticClass:"myAds-intro"},[t._v(t._s(e.intro))])],1)],1)}))],2),t.adsList.length>0?s("v-uni-view",{staticClass:"load-more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[s("v-uni-text",[t._v(t._s(t.moreText))])],1):t._e()],1)],1)},i=[]},a987:function(t,e,s){"use strict";s.r(e);var a=s("d35e"),i=s.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(n);e["default"]=i.a},cb3b:function(t,e,s){"use strict";s.r(e);var a=s("3ee7"),i=s("a987");for(var n in i)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(n);var o=s("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"993992d2",null,!1,a["a"],void 0);e["default"]=c.exports},d35e:function(t,e,s){"use strict";s("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,s("e25e"),s("fb6a"),s("e9c4"),s("99af");var a=s("625a"),i={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,NavBar:this.StatusBar+this.CustomBar,AppStyle:this.$store.state.AppStyle,status:1,page:1,moreText:"加载更多",isLoad:0,token:"",adsList:[]}},onPullDownRefresh:function(){},onReachBottom:function(){0==this.isLoad&&this.loadMore()},onShow:function(){this.page=1,a.localStorage.getItem("token")&&(this.page=1,this.token=a.localStorage.getItem("token"),this.getAdsList(!1))},onLoad:function(t){a.localStorage.getItem("token")&&(this.token=a.localStorage.getItem("token"),this.getAdsList(!1))},methods:{back:function(){uni.navigateBack({delta:1})},getType:function(t){return["文章推流广告","横幅广告","启动图广告"][t]},loadMore:function(){this.moreText="正在加载中...",this.isLoad=1,this.getAdsList(!0)},formatDate:function(t){t=new Date(parseInt(1e3*t));var e=t.getFullYear(),s=("0"+(t.getMonth()+1)).slice(-2),a=("0"+t.getDate()).slice(-2),i=("0"+t.getHours()).slice(-2),n=("0"+t.getMinutes()).slice(-2),o=e+"-"+s+"-"+a+" "+i+":"+n;return o},setStatus:function(t){this.adsList=[],this.status=t,this.page=1,this.getAdsList(!1)},getAdsList:function(t){var e=this;if(""==e.token)return uni.showToast({title:"请先登录",icon:"none",duration:1e3,position:"bottom"}),!1;var s=e.page;t&&s++;var i="";if(a.localStorage.getItem("userinfo")){var n=JSON.parse(a.localStorage.getItem("userinfo"));i=n.uid}var o={status:e.status,uid:i};e.$Net.request({url:e.$API.adsList(),data:{searchParams:JSON.stringify(e.$API.removeObjectEmptyKey(o)),limit:8,page:s,token:e.token},header:{"Content-Type":"application/x-www-form-urlencoded"},method:"get",dataType:"json",success:function(s){if(e.isLoad=0,e.moreText="加载更多",1==s.data.code){var a=s.data.data;a.length>0?t?(e.page++,e.adsList=e.contentsList.concat(a)):e.adsList=a:(e.moreText="没有更多数据了",t||(e.adsList=a))}setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300)},fail:function(t){setTimeout((function(){e.isLoading=1,clearTimeout("timer")}),300);e.moreText="加载更多",e.isLoad=0}})},goEdit:function(t){var e=t.type,s=t.aid;uni.showModal({title:"提示",content:"修改广告需要重新审核，可能导致广告无法上线！",success:function(t){t.confirm?uni.navigateTo({url:"/pages/ads/adsPost?post=edit&type="+e+"&aid="+s}):t.cancel}})}}};e.default=i}}]);